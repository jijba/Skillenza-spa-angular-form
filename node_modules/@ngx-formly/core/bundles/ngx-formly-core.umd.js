(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('rxjs'), require('@angular/core'), require('@angular/forms'), require('rxjs/operators'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('@ngx-formly/core', ['exports', 'rxjs', '@angular/core', '@angular/forms', 'rxjs/operators', '@angular/common'], factory) :
    (factory((global['ngx-formly'] = global['ngx-formly'] || {}, global['ngx-formly'].core = {}),global.rxjs,global.ng.core,global.ng.forms,global.rxjs.operators,global.ng.common));
}(this, (function (exports,rxjs,core,forms,operators,common) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b)
            if (b.hasOwnProperty(p))
                d[p] = b[p]; };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s)
                if (Object.prototype.hasOwnProperty.call(s, p))
                    t[p] = s[p];
        }
        return t;
    };
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @param {?} formId
     * @param {?} field
     * @param {?} index
     * @return {?}
     */
    function getFieldId(formId, field, index) {
        if (field.id)
            return field.id;
        var /** @type {?} */ type = field.type;
        if (!type && field.template)
            type = 'template';
        return [formId, type, field.key, index].join('_');
    }
    /**
     * @param {?} field
     * @return {?}
     */
    function getKeyPath(field) {
        /* We store the keyPath in the field for performance reasons. This function will be called frequently. */
        if (!((field))['_formlyKeyPath'] || ((field))['_formlyKeyPath'].key !== field.key) {
            var /** @type {?} */ keyPath = [];
            if (field.key) {
                /* Also allow for an array key, hence the type check  */
                var /** @type {?} */ pathElements = typeof field.key === 'string' ? field.key.split('.') : field.key;
                try {
                    for (var pathElements_1 = __values(pathElements), pathElements_1_1 = pathElements_1.next(); !pathElements_1_1.done; pathElements_1_1 = pathElements_1.next()) {
                        var pathElement = pathElements_1_1.value;
                        if (typeof pathElement === 'string') {
                            /* replace paths of the form names[2] by names.2, cfr. angular formly */
                            pathElement = pathElement.replace(/\[(\w+)\]/g, '.$1');
                            keyPath = keyPath.concat(pathElement.split('.'));
                        }
                        else {
                            keyPath.push(pathElement);
                        }
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (pathElements_1_1 && !pathElements_1_1.done && (_a = pathElements_1.return))
                            _a.call(pathElements_1);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                for (var /** @type {?} */ i = 0; i < keyPath.length; i++) {
                    var /** @type {?} */ pathElement = keyPath[i];
                    if (typeof pathElement === 'string' && stringIsInteger(pathElement)) {
                        keyPath[i] = parseInt(pathElement);
                    }
                }
            }
            ((field))['_formlyKeyPath'] = {
                key: field.key,
                path: keyPath,
            };
        }
        return ((field))['_formlyKeyPath'].path.slice(0);
        var e_1, _a;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    function stringIsInteger(str) {
        return !isNullOrUndefined(str) && /^\d+$/.test(str);
    }
    var /** @type {?} */ FORMLY_VALIDATORS = ['required', 'pattern', 'minLength', 'maxLength', 'min', 'max'];
    /**
     * @param {?} model
     * @param {?} field
     * @param {?} constructEmptyObjects
     * @return {?}
     */
    function getFieldModel(model, field, constructEmptyObjects) {
        var /** @type {?} */ keyPath = getKeyPath(field);
        var /** @type {?} */ value = model;
        for (var /** @type {?} */ i = 0; i < keyPath.length; i++) {
            var /** @type {?} */ path = keyPath[i];
            var /** @type {?} */ pathValue = value[path];
            if (isNullOrUndefined(pathValue) && constructEmptyObjects) {
                if (i < keyPath.length - 1) {
                    /* TODO? : It would be much nicer if we could construct object instances of the correct class, for instance by using factories. */
                    value[path] = typeof keyPath[i + 1] === 'number' ? [] : {};
                }
                else if (field.fieldGroup && !field.fieldArray) {
                    value[path] = {};
                }
                else if (field.fieldArray) {
                    value[path] = [];
                }
            }
            value = value[path];
            if (!value) {
                break;
            }
        }
        return value;
    }
    /**
     * @param {?} fields
     * @param {?} model
     * @return {?}
     */
    function assignModelToFields(fields, model) {
        fields.forEach(function (field, index) {
            if (!isUndefined(field.defaultValue) && isUndefined(getValueForKey(model, field.key))) {
                assignModelValue(model, field.key, field.defaultValue);
            }
            ((field)).model = model;
            if (field.key && (field.fieldGroup || field.fieldArray)) {
                ((field)).model = getFieldModel(model, field, true);
            }
            if (field.fieldGroup) {
                assignModelToFields(field.fieldGroup, field.model);
            }
        });
    }
    /**
     * @param {?} model
     * @param {?} path
     * @param {?} value
     * @return {?}
     */
    function assignModelValue(model, path, value) {
        if (typeof path === 'string') {
            path = getKeyPath({ key: path });
        }
        if (path.length > 1) {
            var /** @type {?} */ e = path.shift();
            if (!model[e] || !isObject(model[e])) {
                model[e] = typeof path[0] === 'string' ? {} : [];
            }
            assignModelValue(model[e], path, value);
        }
        else {
            model[path[0]] = value;
        }
    }
    /**
     * @param {?} model
     * @param {?} path
     * @return {?}
     */
    function getValueForKey(model, path) {
        if (typeof path === 'string') {
            path = getKeyPath({ key: path });
        }
        if (path.length > 1) {
            var /** @type {?} */ e = path.shift();
            if (!model[e]) {
                model[e] = typeof path[0] === 'string' ? {} : [];
            }
            return getValueForKey(model[e], path);
        }
        else {
            return model[path[0]];
        }
    }
    /**
     * @param {?} dest
     * @param {...?} args
     * @return {?}
     */
    function reverseDeepMerge(dest) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        args.forEach(function (src) {
            for (var /** @type {?} */ srcArg in src) {
                if (isNullOrUndefined(dest[srcArg]) || isBlankString(dest[srcArg])) {
                    if (isFunction(src[srcArg])) {
                        dest[srcArg] = src[srcArg];
                    }
                    else {
                        dest[srcArg] = clone(src[srcArg]);
                    }
                }
                else if (objAndSameType(dest[srcArg], src[srcArg])) {
                    reverseDeepMerge(dest[srcArg], src[srcArg]);
                }
            }
        });
        return dest;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function isNullOrUndefined(value) {
        return value === undefined || value === null;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function isUndefined(value) {
        return value === undefined;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function isBlankString(value) {
        return value === '';
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function isFunction(value) {
        return typeof (value) === 'function';
    }
    /**
     * @param {?} obj1
     * @param {?} obj2
     * @return {?}
     */
    function objAndSameType(obj1, obj2) {
        return isObject(obj1) && isObject(obj2) &&
            Object.getPrototypeOf(obj1) === Object.getPrototypeOf(obj2);
    }
    /**
     * @param {?} x
     * @return {?}
     */
    function isObject(x) {
        return x != null && typeof x === 'object';
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function clone(value) {
        if (!isObject(value) || value instanceof RegExp || value instanceof rxjs.Observable) {
            return value;
        }
        if (Object.prototype.toString.call(value) === '[object Date]') {
            return new Date(value.getTime());
        }
        if (Array.isArray(value)) {
            return value.slice(0).map(function (v) { return clone(v); });
        }
        value = Object.assign({}, value);
        Object.keys(value).forEach(function (k) { return value[k] = clone(value[k]); });
        return value;
    }
    /**
     * @param {?} expression
     * @param {?} argNames
     * @return {?}
     */
    function evalStringExpression(expression, argNames) {
        try {
            return Function.bind.apply(Function, [void 0].concat(argNames.concat("return " + expression + ";")))();
        }
        catch (error) {
            console.error(error);
        }
    }
    /**
     * @param {?} expression
     * @param {?} argNames
     * @return {?}
     */
    function evalExpressionValueSetter(expression, argNames) {
        try {
            return Function.bind
                .apply(Function, [void 0].concat(argNames.concat(expression + " = expressionValue;")))();
        }
        catch (error) {
            console.error(error);
        }
    }
    /**
     * @param {?} expression
     * @param {?} thisArg
     * @param {?} argVal
     * @return {?}
     */
    function evalExpression(expression, thisArg, argVal) {
        if (expression instanceof Function) {
            return expression.apply(thisArg, argVal);
        }
        else {
            return expression ? true : false;
        }
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ FORMLY_CONFIG_TOKEN = new core.InjectionToken('FORMLY_CONFIG_TOKEN');
    /**
     * Maintains list of formly field directive types. This can be used to register new field templates.
     */
    var FormlyConfig = (function () {
        function FormlyConfig(configs) {
            if (configs === void 0) {
                configs = [];
            }
            var _this = this;
            this.types = {};
            this.validators = {};
            this.wrappers = {};
            this.messages = {};
            this.templateManipulators = {
                preWrapper: [],
                postWrapper: [],
            };
            this.extras = {
                fieldTransform: undefined,
                showError: function (field) {
                    return field.formControl && field.formControl.invalid && (field.formControl.touched || (field.options.parentForm && field.options.parentForm.submitted) || (field.field.validation && field.field.validation.show));
                },
            };
            configs.forEach(function (config) { return _this.addConfig(config); });
        }
        /**
         * @param {?} config
         * @return {?}
         */
        FormlyConfig.prototype.addConfig = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                var _this = this;
                if (config.types) {
                    config.types.forEach(function (type) { return _this.setType(type); });
                }
                if (config.validators) {
                    config.validators.forEach(function (validator) { return _this.setValidator(validator); });
                }
                if (config.wrappers) {
                    config.wrappers.forEach(function (wrapper) { return _this.setWrapper(wrapper); });
                }
                if (config.manipulators) {
                    config.manipulators.forEach(function (manipulator) { return _this.setManipulator(manipulator); });
                }
                if (config.validationMessages) {
                    config.validationMessages.forEach(function (validation) { return _this.addValidatorMessage(validation.name, validation.message); });
                }
                if (config.extras) {
                    this.extras = __assign({}, this.extras, config.extras);
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        FormlyConfig.prototype.setType = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                var _this = this;
                if (Array.isArray(options)) {
                    options.forEach(function (option) { return _this.setType(option); });
                }
                else {
                    if (!this.types[options.name]) {
                        this.types[options.name] = /** @type {?} */ ({});
                    }
                    this.types[options.name].component = options.component;
                    this.types[options.name].name = options.name;
                    this.types[options.name].extends = options.extends;
                    this.types[options.name].defaultOptions = options.defaultOptions;
                    if (options.wrappers) {
                        options.wrappers.forEach(function (wrapper) { return _this.setTypeWrapper(options.name, wrapper); });
                    }
                }
            };
        /**
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.getType = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (!this.types[name]) {
                    throw new Error("[Formly Error] There is no type by the name of \"" + name + "\"");
                }
                this.mergeExtendedType(name);
                return this.types[name];
            };
        /**
         * @param {?=} field
         * @return {?}
         */
        FormlyConfig.prototype.getMergedField = /**
         * @param {?=} field
         * @return {?}
         */
            function (field) {
                var _this = this;
                if (field === void 0) {
                    field = {};
                }
                var /** @type {?} */ name = field.type;
                if (!this.types[name]) {
                    throw new Error("[Formly Error] There is no type by the name of \"" + name + "\"");
                }
                this.mergeExtendedType(name);
                if (this.types[name].defaultOptions) {
                    reverseDeepMerge(field, this.types[name].defaultOptions);
                }
                var /** @type {?} */ extendDefaults = this.types[name].extends && this.getType(this.types[name].extends).defaultOptions;
                if (extendDefaults) {
                    reverseDeepMerge(field, extendDefaults);
                }
                if (field && field.optionsTypes) {
                    field.optionsTypes.forEach(function (option) {
                        var /** @type {?} */ defaultOptions = _this.getType(option).defaultOptions;
                        if (defaultOptions) {
                            reverseDeepMerge(field, defaultOptions);
                        }
                    });
                }
                if (!field.component) {
                    field.component = this.types[name].component;
                }
                if (!field.wrappers) {
                    field.wrappers = this.types[name].wrappers;
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        FormlyConfig.prototype.setWrapper = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                var _this = this;
                this.wrappers[options.name] = options;
                if (options.types) {
                    options.types.forEach(function (type) {
                        _this.setTypeWrapper(type, options.name);
                    });
                }
            };
        /**
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.getWrapper = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (!this.wrappers[name]) {
                    throw new Error("[Formly Error] There is no wrapper by the name of \"" + name + "\"");
                }
                return this.wrappers[name];
            };
        /**
         * @param {?} type
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.setTypeWrapper = /**
         * @param {?} type
         * @param {?} name
         * @return {?}
         */
            function (type, name) {
                if (!this.types[type]) {
                    this.types[type] = /** @type {?} */ ({});
                }
                if (!this.types[type].wrappers) {
                    this.types[type].wrappers = /** @type {?} */ ([]);
                }
                this.types[type].wrappers.push(name);
            };
        /**
         * @param {?} options
         * @return {?}
         */
        FormlyConfig.prototype.setValidator = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                this.validators[options.name] = options;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.getValidator = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (!this.validators[name]) {
                    throw new Error("[Formly Error] There is no validator by the name of \"" + name + "\"");
                }
                return this.validators[name];
            };
        /**
         * @param {?} name
         * @param {?} message
         * @return {?}
         */
        FormlyConfig.prototype.addValidatorMessage = /**
         * @param {?} name
         * @param {?} message
         * @return {?}
         */
            function (name, message) {
                this.messages[name] = message;
            };
        /**
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.getValidatorMessage = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                return this.messages[name];
            };
        /**
         * @param {?} manipulator
         * @return {?}
         */
        FormlyConfig.prototype.setManipulator = /**
         * @param {?} manipulator
         * @return {?}
         */
            function (manipulator) {
                new manipulator.class()[manipulator.method](this);
            };
        /**
         * @param {?} name
         * @return {?}
         */
        FormlyConfig.prototype.mergeExtendedType = /**
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (!this.types[name].extends) {
                    return;
                }
                var /** @type {?} */ extendedType = this.getType(this.types[name].extends);
                if (!this.types[name].component) {
                    this.types[name].component = extendedType.component;
                }
                if (!this.types[name].wrappers) {
                    this.types[name].wrappers = extendedType.wrappers;
                }
            };
        FormlyConfig.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        FormlyConfig.ctorParameters = function () {
            return [
                { type: Array, decorators: [{ type: core.Inject, args: [FORMLY_CONFIG_TOKEN,] }] }
            ];
        };
        return FormlyConfig;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * \@internal
     */
    var FormlyFormExpression = (function () {
        function FormlyFormExpression() {
        }
        /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
        FormlyFormExpression.prototype.checkFields = /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
            function (form, fields, model, options) {
                if (fields === void 0) {
                    fields = [];
                }
                this._checkFields(form, fields, model, options);
            };
        /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
        FormlyFormExpression.prototype._checkFields = /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
            function (form, fields, model, options) {
                var _this = this;
                if (fields === void 0) {
                    fields = [];
                }
                fields.forEach(function (field) {
                    _this.checkFieldExpressionChange(form, field, _this.getParentModel(model, field), options);
                    _this.checkFieldVisibilityChange(form, field, _this.getParentModel(model, field), options);
                    if (field.fieldGroup && field.fieldGroup.length > 0) {
                        _this._checkFields(field.formControl ? /** @type {?} */ (field.formControl) : form, field.fieldGroup, _this.getParentModel(model, field), options);
                    }
                });
            };
        /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} options
         * @return {?}
         */
        FormlyFormExpression.prototype.checkFieldExpressionChange = /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} options
         * @return {?}
         */
            function (form, field, model, options) {
                if (!field || !field.expressionProperties) {
                    return;
                }
                var /** @type {?} */ expressionProperties = field.expressionProperties;
                var /** @type {?} */ validators = FORMLY_VALIDATORS.map(function (v) { return "templateOptions." + v; });
                for (var /** @type {?} */ key in expressionProperties) {
                    var /** @type {?} */ expressionValue = evalExpression(expressionProperties[key].expression, { field: field }, [model, options.formState]);
                    if (expressionProperties[key].expressionValue !== expressionValue
                        && (!isObject(expressionValue) || JSON.stringify(expressionValue) !== JSON.stringify(expressionProperties[key].expressionValue))) {
                        expressionProperties[key].expressionValue = expressionValue;
                        evalExpression(expressionProperties[key].expressionValueSetter, { field: field }, [expressionValue, model, field]);
                        if (key.indexOf('model.') === 0) {
                            var /** @type {?} */ path = key.replace(/^model\./, ''), /** @type {?} */ control = field.key && key === path ? field.formControl : form.get(path);
                            if (control
                                && !(isNullOrUndefined(control.value) && isNullOrUndefined(expressionValue))
                                && control.value !== expressionValue) {
                                control.patchValue(expressionValue);
                            }
                        }
                        if (validators.indexOf(key) !== -1 && field.formControl) {
                            field.formControl.updateValueAndValidity({ emitEvent: false });
                        }
                    }
                }
            };
        /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} options
         * @return {?}
         */
        FormlyFormExpression.prototype.checkFieldVisibilityChange = /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} options
         * @return {?}
         */
            function (form, field, model, options) {
                if (!field || isNullOrUndefined(field.hideExpression)) {
                    return;
                }
                var /** @type {?} */ hideExpressionResult = !!evalExpression(field.hideExpression, { field: field }, [model, options.formState]);
                if (hideExpressionResult !== field.hide) {
                    // toggle hide
                    field.hide = hideExpressionResult;
                    field.templateOptions.hidden = hideExpressionResult;
                    if (field.formControl && field.key) {
                        var /** @type {?} */ parent_1 = this.fieldParentFormControl(form, field);
                        if (parent_1) {
                            var /** @type {?} */ control = parent_1.get("" + this.fieldKey(field));
                            if (hideExpressionResult === true && control) {
                                this.removeFieldControl(parent_1, field);
                            }
                            else if (hideExpressionResult === false && !control) {
                                this.addFieldControl(parent_1, field, model);
                            }
                        }
                    }
                    if (options.fieldChanges) {
                        options.fieldChanges.next(/** @type {?} */ ({ field: field, type: 'hidden', value: hideExpressionResult }));
                    }
                }
            };
        /**
         * @param {?} parent
         * @param {?} field
         * @param {?} model
         * @return {?}
         */
        FormlyFormExpression.prototype.addFieldControl = /**
         * @param {?} parent
         * @param {?} field
         * @param {?} model
         * @return {?}
         */
            function (parent, field, model) {
                var /** @type {?} */ fieldModel = this.getFieldModel(model, field);
                if (!(isNullOrUndefined(field.formControl.value) && isNullOrUndefined(fieldModel))
                    && field.formControl.value !== fieldModel) {
                    field.formControl.patchValue(fieldModel, { emitEvent: false });
                }
                if (parent instanceof forms.FormArray) {
                    parent.push(field.formControl);
                }
                else if (parent instanceof forms.FormGroup) {
                    parent.addControl("" + this.fieldKey(field), field.formControl);
                }
            };
        /**
         * @param {?} model
         * @param {?} field
         * @return {?}
         */
        FormlyFormExpression.prototype.getFieldModel = /**
         * @param {?} model
         * @param {?} field
         * @return {?}
         */
            function (model, field) {
                if (field.fieldGroup || field.fieldArray) {
                    return model;
                }
                return getFieldModel(model, field, false);
            };
        /**
         * @param {?} model
         * @param {?} field
         * @return {?}
         */
        FormlyFormExpression.prototype.getParentModel = /**
         * @param {?} model
         * @param {?} field
         * @return {?}
         */
            function (model, field) {
                if (field.key && (field.fieldGroup || field.fieldArray)) {
                    return getFieldModel(model, field, true);
                }
                return model;
            };
        /**
         * @param {?} parent
         * @param {?} field
         * @return {?}
         */
        FormlyFormExpression.prototype.removeFieldControl = /**
         * @param {?} parent
         * @param {?} field
         * @return {?}
         */
            function (parent, field) {
                if (parent instanceof forms.FormArray) {
                    parent.removeAt(/** @type {?} */ (this.fieldKey(field)));
                }
                else if (parent instanceof forms.FormGroup) {
                    parent.removeControl("" + this.fieldKey(field));
                }
            };
        /**
         * @param {?} form
         * @param {?} field
         * @return {?}
         */
        FormlyFormExpression.prototype.fieldParentFormControl = /**
         * @param {?} form
         * @param {?} field
         * @return {?}
         */
            function (form, field) {
                var /** @type {?} */ paths = getKeyPath(field);
                paths.pop(); // remove last path
                return /** @type {?} */ ((paths.length > 0 ? form.get(paths) : form));
            };
        /**
         * @param {?} field
         * @return {?}
         */
        FormlyFormExpression.prototype.fieldKey = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                return getKeyPath(field).pop();
            };
        FormlyFormExpression.decorators = [
            { type: core.Injectable },
        ];
        return FormlyFormExpression;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyFormBuilder = (function () {
        function FormlyFormBuilder(formlyConfig, formlyFormExpression) {
            this.formlyConfig = formlyConfig;
            this.formlyFormExpression = formlyFormExpression;
            this.formId = 0;
        }
        /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
        FormlyFormBuilder.prototype.buildForm = /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} model
         * @param {?=} options
         * @return {?}
         */
            function (form, fields, model, options) {
                if (fields === void 0) {
                    fields = [];
                }
                var /** @type {?} */ fieldTransforms = (options && options.fieldTransform) || this.formlyConfig.extras.fieldTransform;
                if (!Array.isArray(fieldTransforms)) {
                    fieldTransforms = [fieldTransforms];
                }
                fieldTransforms.forEach(function (fieldTransform) {
                    if (fieldTransform) {
                        fields = fieldTransform(fields, model, form, options);
                        if (!fields) {
                            throw new Error('fieldTransform must return an array of fields');
                        }
                    }
                });
                assignModelToFields(fields, model);
                this._buildForm(form, fields, options);
                this.formlyFormExpression.checkFields(form, fields, model, options);
            };
        /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} options
         * @return {?}
         */
        FormlyFormBuilder.prototype._buildForm = /**
         * @param {?} form
         * @param {?=} fields
         * @param {?=} options
         * @return {?}
         */
            function (form, fields, options) {
                if (fields === void 0) {
                    fields = [];
                }
                this.formId++;
                this.registerFormControls(form, fields, options);
            };
        /**
         * @param {?} form
         * @param {?} fields
         * @param {?} options
         * @return {?}
         */
        FormlyFormBuilder.prototype.registerFormControls = /**
         * @param {?} form
         * @param {?} fields
         * @param {?} options
         * @return {?}
         */
            function (form, fields, options) {
                var _this = this;
                fields.forEach(function (field, index) {
                    field.id = getFieldId("formly_" + _this.formId, field, index);
                    _this.initFieldOptions(field);
                    _this.initFieldExpression(field, options);
                    _this.initFieldValidation(field);
                    _this.initFieldWrappers(field);
                    _this.initFieldAsyncValidation(field);
                    if (field.key && field.type) {
                        var /** @type {?} */ paths_1 = getKeyPath({ key: field.key });
                        var /** @type {?} */ rootForm_1 = form, /** @type {?} */ rootModel_1 = field.model;
                        paths_1.forEach(function (path, index) {
                            // FormGroup/FormArray only allow string value for path
                            var /** @type {?} */ formPath = path.toString();
                            // is last item
                            if (index === paths_1.length - 1) {
                                _this.addFormControl(rootForm_1, field, rootModel_1, formPath);
                                if (field.fieldArray) {
                                    field.fieldGroup = [];
                                    field.model.forEach(function (m, i) { return field.fieldGroup.push(__assign({}, clone(field.fieldArray), { key: "" + i })); });
                                    assignModelToFields(field.fieldGroup, rootModel_1);
                                }
                            }
                            else {
                                var /** @type {?} */ nestedForm = (rootForm_1.get(formPath));
                                if (!nestedForm) {
                                    nestedForm = new forms.FormGroup({});
                                    _this.addControl(rootForm_1, formPath, nestedForm);
                                }
                                if (!rootModel_1[path]) {
                                    rootModel_1[path] = typeof path === 'string' ? {} : [];
                                }
                                rootForm_1 = nestedForm;
                                rootModel_1 = rootModel_1[path];
                            }
                        });
                    }
                    if (field.fieldGroup) {
                        if (!field.type) {
                            field.type = 'formly-group';
                        }
                        // if `hideExpression` is set in that case we have to deal
                        // with toggle FormControl for each field in fieldGroup separately
                        if (field.hideExpression) {
                            field.fieldGroup.forEach(function (f) {
                                var /** @type {?} */ hideExpression = f.hideExpression || (function () { return false; });
                                if (typeof hideExpression === 'string') {
                                    hideExpression = evalStringExpression(hideExpression, ['model', 'formState']);
                                }
                                f.hideExpression = function (model, formState) { return field.hide || hideExpression(model, formState); };
                            });
                        }
                        if (field.key) {
                            _this.addFormControl(form, field, (_a = {}, _a[field.key] = field.fieldArray ? [] : {}, _a), field.key);
                            _this._buildForm(/** @type {?} */ (field.formControl), field.fieldGroup, options);
                        }
                        else {
                            _this._buildForm(form, field.fieldGroup, options);
                        }
                    }
                    var _a;
                });
            };
        /**
         * @param {?} field
         * @param {?} options
         * @return {?}
         */
        FormlyFormBuilder.prototype.initFieldExpression = /**
         * @param {?} field
         * @param {?} options
         * @return {?}
         */
            function (field, options) {
                if (field.expressionProperties) {
                    for (var /** @type {?} */ key in (field.expressionProperties)) {
                        if (typeof field.expressionProperties[key] === 'string' || isFunction(field.expressionProperties[key])) {
                            // cache built expression
                            field.expressionProperties[key] = {
                                expression: isFunction(field.expressionProperties[key]) ? field.expressionProperties[key] : evalStringExpression(field.expressionProperties[key], ['model', 'formState']),
                                expressionValueSetter: evalExpressionValueSetter("field." + key, ['expressionValue', 'model', 'field']),
                            };
                        }
                    }
                }
                if (field.hideExpression) {
                    // delete hide value in order to force re-evaluate it in FormlyFormExpression.
                    delete field.hide;
                    if (typeof field.hideExpression === 'string') {
                        // cache built expression
                        field.hideExpression = evalStringExpression(field.hideExpression, ['model', 'formState']);
                    }
                }
            };
        /**
         * @param {?} field
         * @return {?}
         */
        FormlyFormBuilder.prototype.initFieldOptions = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                field.templateOptions = field.templateOptions || {};
                if (field.type) {
                    this.formlyConfig.getMergedField(field);
                    if (field.key) {
                        field.templateOptions = Object.assign({
                            label: '',
                            placeholder: '',
                            focus: false,
                        }, field.templateOptions);
                    }
                }
            };
        /**
         * @param {?} field
         * @return {?}
         */
        FormlyFormBuilder.prototype.initFieldAsyncValidation = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                var _this = this;
                var /** @type {?} */ validators = [];
                if (field.asyncValidators) {
                    var _loop_1 = function (validatorName) {
                        if (validatorName !== 'validation') {
                            var /** @type {?} */ validator_1 = field.asyncValidators[validatorName];
                            if (isObject(validator_1)) {
                                validator_1 = validator_1.expression;
                            }
                            validators.push(function (control) {
                                return new Promise(function (resolve) {
                                    return validator_1(control, field).then(function (result) {
                                        resolve(result ? null : (_a = {}, _a[validatorName] = true, _a));
                                        var _a;
                                    });
                                });
                            });
                        }
                    };
                    for (var /** @type {?} */ validatorName in field.asyncValidators) {
                        _loop_1(validatorName);
                    }
                }
                if (field.asyncValidators && Array.isArray(field.asyncValidators.validation)) {
                    field.asyncValidators.validation
                        .forEach(function (validator) { return validators.push(_this.wrapNgValidatorFn(field, validator)); });
                }
                if (validators.length) {
                    if (field.asyncValidators && !Array.isArray(field.asyncValidators.validation)) {
                        field.asyncValidators.validation = forms.Validators.composeAsync(__spread([field.asyncValidators.validation], validators));
                    }
                    else {
                        field.asyncValidators = {
                            validation: forms.Validators.composeAsync(validators),
                        };
                    }
                }
            };
        /**
         * @param {?} field
         * @return {?}
         */
        FormlyFormBuilder.prototype.initFieldValidation = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                var _this = this;
                var /** @type {?} */ validators = [];
                FORMLY_VALIDATORS
                    .filter(function (opt) {
                    return (field.templateOptions && field.templateOptions.hasOwnProperty(opt))
                        || (field.expressionProperties && field.expressionProperties["templateOptions." + opt]);
                })
                    .forEach(function (opt) {
                    validators.push(function (control) {
                        if (field.templateOptions[opt] === false) {
                            return null;
                        }
                        return _this.getValidation(opt, field.templateOptions[opt])(control);
                    });
                });
                if (field.validators) {
                    var _loop_2 = function (validatorName) {
                        if (validatorName !== 'validation') {
                            var /** @type {?} */ validator_2 = field.validators[validatorName];
                            if (isObject(validator_2)) {
                                validator_2 = validator_2.expression;
                            }
                            validators.push(function (control) {
                                return validator_2(control, field) ? null : (_a = {}, _a[validatorName] = true, _a);
                                var _a;
                            });
                        }
                    };
                    for (var /** @type {?} */ validatorName in field.validators) {
                        _loop_2(validatorName);
                    }
                }
                if (field.validators && Array.isArray(field.validators.validation)) {
                    field.validators.validation
                        .forEach(function (validator) { return validators.push(_this.wrapNgValidatorFn(field, validator)); });
                }
                if (validators.length) {
                    if (field.validators && !Array.isArray(field.validators.validation)) {
                        field.validators.validation = forms.Validators.compose(__spread([field.validators.validation], validators));
                    }
                    else {
                        field.validators = {
                            validation: forms.Validators.compose(validators),
                        };
                    }
                }
            };
        /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} path
         * @return {?}
         */
        FormlyFormBuilder.prototype.addFormControl = /**
         * @param {?} form
         * @param {?} field
         * @param {?} model
         * @param {?} path
         * @return {?}
         */
            function (form, field, model, path) {
                var /** @type {?} */ control;
                var /** @type {?} */ validators = field.validators ? field.validators.validation : undefined, /** @type {?} */ asyncValidators = field.asyncValidators ? field.asyncValidators.validation : undefined, /** @type {?} */ updateOn = field.modelOptions && field.modelOptions.updateOn ?
                    field.modelOptions.updateOn : undefined;
                var /** @type {?} */ abstractControlOptions = ({
                    validators: validators,
                    asyncValidators: asyncValidators,
                    updateOn: updateOn,
                });
                if (field.formControl instanceof forms.AbstractControl || form.get(path)) {
                    control = field.formControl || form.get(path);
                    if (!(isNullOrUndefined(control.value) && isNullOrUndefined(model[path]))
                        && control.value !== model[path]
                        && control instanceof forms.FormControl) {
                        control.patchValue(model[path]);
                    }
                }
                else if (field.component && field.component.createControl) {
                    control = field.component.createControl(model[path], field);
                }
                else if (field.fieldGroup && field.key && field.key === path && !field.fieldArray) {
                    control = new forms.FormGroup(model[path], abstractControlOptions);
                }
                else if (field.fieldArray && field.key && field.key === path) {
                    control = new forms.FormArray([], abstractControlOptions);
                }
                else {
                    control = new forms.FormControl(model[path], abstractControlOptions);
                }
                if (field.templateOptions.disabled) {
                    control.disable();
                }
                // Replace decorated property with a getter that returns the observable.
                // https://github.com/angular-redux/store/blob/master/src/decorators/select.ts#L79-L85
                if (delete field.templateOptions.disabled) {
                    Object.defineProperty(field.templateOptions, 'disabled', {
                        get: (function () { return !this.formControl.enabled; }).bind(field),
                        set: (function (value) {
                            if (this.expressionProperties && this.expressionProperties.hasOwnProperty('templateOptions.disabled')) {
                                this.expressionProperties['templateOptions.disabled'].expressionValue = value;
                            }
                            value ? this.formControl.disable() : this.formControl.enable();
                        }).bind(field),
                        enumerable: true,
                        configurable: true,
                    });
                }
                this.addControl(form, path, control, field);
            };
        /**
         * @param {?} form
         * @param {?} key
         * @param {?} formControl
         * @param {?=} field
         * @return {?}
         */
        FormlyFormBuilder.prototype.addControl = /**
         * @param {?} form
         * @param {?} key
         * @param {?} formControl
         * @param {?=} field
         * @return {?}
         */
            function (form, key, formControl, field) {
                if (field) {
                    field.formControl = formControl;
                }
                if (form instanceof forms.FormArray) {
                    if (form.at(/** @type {?} */ (key)) !== formControl) {
                        form.setControl(/** @type {?} */ (key), formControl);
                    }
                }
                else {
                    if (form.get(/** @type {?} */ (key)) !== formControl) {
                        form.setControl(/** @type {?} */ (key), formControl);
                    }
                }
            };
        /**
         * @param {?} opt
         * @param {?} value
         * @return {?}
         */
        FormlyFormBuilder.prototype.getValidation = /**
         * @param {?} opt
         * @param {?} value
         * @return {?}
         */
            function (opt, value) {
                switch (opt) {
                    case 'required':
                        return forms.Validators.required;
                    case 'pattern':
                        return forms.Validators.pattern(value);
                    case 'minLength':
                        return forms.Validators.minLength(value);
                    case 'maxLength':
                        return forms.Validators.maxLength(value);
                    case 'min':
                        return forms.Validators.min(value);
                    case 'max':
                        return forms.Validators.max(value);
                }
            };
        /**
         * @param {?} field
         * @param {?} validator
         * @return {?}
         */
        FormlyFormBuilder.prototype.wrapNgValidatorFn = /**
         * @param {?} field
         * @param {?} validator
         * @return {?}
         */
            function (field, validator) {
                validator = typeof validator === 'string'
                    ? this.formlyConfig.getValidator(validator).validation
                    : validator;
                return function (control) { return ((validator))(control, field); };
            };
        /**
         * @param {?} field
         * @return {?}
         */
        FormlyFormBuilder.prototype.initFieldWrappers = /**
         * @param {?} field
         * @return {?}
         */
            function (field) {
                var /** @type {?} */ templateManipulators = {
                    preWrapper: [],
                    postWrapper: [],
                };
                if (field.templateOptions) {
                    this.mergeTemplateManipulators(templateManipulators, field.templateOptions.templateManipulators);
                }
                this.mergeTemplateManipulators(templateManipulators, this.formlyConfig.templateManipulators);
                var /** @type {?} */ preWrappers = templateManipulators.preWrapper.map(function (m) { return m(field); }).filter(function (type) { return type; }), /** @type {?} */ postWrappers = templateManipulators.postWrapper.map(function (m) { return m(field); }).filter(function (type) { return type; });
                if (!field.wrappers) {
                    field.wrappers = [];
                }
                field.wrappers = __spread(preWrappers, (field.wrappers || []), postWrappers);
            };
        /**
         * @param {?} source
         * @param {?} target
         * @return {?}
         */
        FormlyFormBuilder.prototype.mergeTemplateManipulators = /**
         * @param {?} source
         * @param {?} target
         * @return {?}
         */
            function (source, target) {
                target = target || {};
                if (target.preWrapper) {
                    source.preWrapper = source.preWrapper.concat(target.preWrapper);
                }
                if (target.postWrapper) {
                    source.postWrapper = source.postWrapper.concat(target.postWrapper);
                }
                return source;
            };
        FormlyFormBuilder.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        FormlyFormBuilder.ctorParameters = function () {
            return [
                { type: FormlyConfig },
                { type: FormlyFormExpression }
            ];
        };
        return FormlyFormBuilder;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyForm = (function () {
        function FormlyForm(formlyBuilder, formlyExpression, formlyConfig, parentForm, parentFormGroup, parentFormlyForm) {
            this.formlyBuilder = formlyBuilder;
            this.formlyExpression = formlyExpression;
            this.formlyConfig = formlyConfig;
            this.parentForm = parentForm;
            this.parentFormGroup = parentFormGroup;
            this.parentFormlyForm = parentFormlyForm;
            this.model = {};
            this.form = new forms.FormGroup({});
            this.fields = [];
            this.modelChange = new core.EventEmitter();
            /**
             * \@internal
             */
            this.isRoot = true;
            this.modelChangeSubs = [];
        }
        /**
         * @return {?}
         */
        FormlyForm.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () {
                this.checkExpressionChange();
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        FormlyForm.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (!this.fields || this.fields.length === 0 || !this.isRoot) {
                    return;
                }
                if (changes["fields"] || changes["form"]) {
                    this.model = this.model || {};
                    this.form = this.form || (new forms.FormGroup({}));
                    this.setOptions();
                    this.clearModelSubscriptions();
                    this.formlyBuilder.buildForm(this.form, this.fields, this.model, this.options);
                    this.trackModelChanges(this.fields);
                    this.updateInitialValue();
                }
                else if (changes["model"]) {
                    this.patchModel(this.model);
                }
            };
        /**
         * @return {?}
         */
        FormlyForm.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.clearModelSubscriptions();
            };
        /**
         * @param {?} event
         * @return {?}
         */
        FormlyForm.prototype.changeModel = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                assignModelValue(this.model, event.key, event.value);
                this.modelChange.emit(this.model);
                this.checkExpressionChange();
            };
        /**
         * @return {?}
         */
        FormlyForm.prototype.setOptions = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.options = this.options || {};
                this.options.formState = this.options.formState || {};
                if (!this.options.showError) {
                    this.options.showError = this.formlyConfig.extras.showError;
                }
                if (!this.options.fieldChanges) {
                    this.options.fieldChanges = new rxjs.Subject();
                }
                if (!this.options.resetModel) {
                    this.options.resetModel = this.resetModel.bind(this);
                }
                if (!this.options.parentForm) {
                    this.options.parentForm = this.parentFormGroup || this.parentForm;
                }
                if (!this.options.updateInitialValue) {
                    this.options.updateInitialValue = this.updateInitialValue.bind(this);
                }
                if (!((this.options)).resetTrackModelChanges) {
                    ((this.options)).resetTrackModelChanges = function () {
                        _this.clearModelSubscriptions();
                        _this.trackModelChanges(_this.fields);
                    };
                }
            };
        /**
         * @return {?}
         */
        FormlyForm.prototype.checkExpressionChange = /**
         * @return {?}
         */
            function () {
                if (this.isRoot) {
                    this.formlyExpression.checkFields(this.form, this.fields, this.model, this.options);
                }
            };
        /**
         * @param {?} fields
         * @param {?=} rootKey
         * @return {?}
         */
        FormlyForm.prototype.trackModelChanges = /**
         * @param {?} fields
         * @param {?=} rootKey
         * @return {?}
         */
            function (fields, rootKey) {
                var _this = this;
                if (rootKey === void 0) {
                    rootKey = [];
                }
                fields.forEach(function (field) {
                    if (field.key && field.type && !field.fieldGroup && !field.fieldArray) {
                        var /** @type {?} */ valueChanges = field.formControl.valueChanges.pipe(field.modelOptions && field.modelOptions.debounce && field.modelOptions.debounce.default
                            ? operators.debounceTime(field.modelOptions.debounce.default)
                            : operators.tap(function () { }), operators.map(function (value) {
                            if (field.parsers && field.parsers.length > 0) {
                                field.parsers.forEach(function (parserFn) { return value = parserFn(value); });
                            }
                            return value;
                        }), operators.tap(function (value) { return _this.changeModel({ key: __spread(rootKey, [field.key]).join('.'), value: value }); }));
                        _this.modelChangeSubs.push(valueChanges.subscribe());
                    }
                    if (field.fieldGroup && field.fieldGroup.length > 0) {
                        _this.trackModelChanges(field.fieldGroup, field.key ? __spread(rootKey, [field.key]) : rootKey);
                    }
                });
            };
        /**
         * @return {?}
         */
        FormlyForm.prototype.clearModelSubscriptions = /**
         * @return {?}
         */
            function () {
                this.modelChangeSubs.forEach(function (sub) { return sub.unsubscribe(); });
                this.modelChangeSubs = [];
            };
        /**
         * @param {?} model
         * @return {?}
         */
        FormlyForm.prototype.patchModel = /**
         * @param {?} model
         * @return {?}
         */
            function (model) {
                assignModelToFields(this.fields, model);
                this.clearModelSubscriptions();
                this.resetFieldArray(this.fields, model);
                this.initializeFormValue(this.form);
                ((this.form)).patchValue(model, { onlySelf: true });
                this.trackModelChanges(this.fields);
            };
        /**
         * @param {?=} model
         * @return {?}
         */
        FormlyForm.prototype.resetModel = /**
         * @param {?=} model
         * @return {?}
         */
            function (model) {
                model = isNullOrUndefined(model) ? this.initialModel : model;
                this.resetFieldArray(this.fields, model);
                // we should call `NgForm::resetForm` to ensure changing `submitted` state after resetting form
                // but only when the current component is a root one.
                if (!this.parentFormlyForm && this.options.parentForm && this.options.parentForm.control === this.form) {
                    this.options.parentForm.resetForm(model);
                }
                else {
                    this.form.reset(model);
                }
                ((this.options)).resetTrackModelChanges();
            };
        /**
         * @param {?} fields
         * @param {?} newModel
         * @return {?}
         */
        FormlyForm.prototype.resetFieldArray = /**
         * @param {?} fields
         * @param {?} newModel
         * @return {?}
         */
            function (fields, newModel) {
                var _this = this;
                fields.forEach(function (field) {
                    if ((field.fieldGroup && field.fieldGroup.length > 0) || field.fieldArray) {
                        var /** @type {?} */ newFieldModel_1 = getFieldModel(newModel, field, true);
                        if (field.fieldArray) {
                            field.fieldGroup = field.fieldGroup || [];
                            field.fieldGroup.length = 0;
                            if (field.model !== newFieldModel_1 && field.model) {
                                field.model.length = 0;
                            }
                            var /** @type {?} */ formControl_1 = (field.formControl);
                            while (formControl_1.length !== 0) {
                                formControl_1.removeAt(0);
                            }
                            newFieldModel_1.forEach(function (m, i) {
                                field.model[i] = m;
                                field.fieldGroup.push(__assign({}, clone(field.fieldArray), { key: "" + i }));
                                _this.formlyBuilder.buildForm(formControl_1, [field.fieldGroup[i]], newFieldModel_1, _this.options);
                            });
                        }
                        else {
                            _this.resetFieldArray(field.fieldGroup, newFieldModel_1);
                        }
                    }
                    else if (field.key && field.type) {
                        field.formControl.reset(getFieldModel(newModel, field, false));
                    }
                });
            };
        /**
         * @param {?} control
         * @return {?}
         */
        FormlyForm.prototype.initializeFormValue = /**
         * @param {?} control
         * @return {?}
         */
            function (control) {
                var _this = this;
                if (control instanceof forms.FormControl) {
                    control.setValue(null);
                }
                else if (control instanceof forms.FormGroup) {
                    Object.keys(control.controls).forEach(function (k) { return _this.initializeFormValue(control.controls[k]); });
                }
                else if (control instanceof forms.FormArray) {
                    control.controls.forEach(function (c) { return _this.initializeFormValue(c); });
                }
            };
        /**
         * @return {?}
         */
        FormlyForm.prototype.updateInitialValue = /**
         * @return {?}
         */
            function () {
                this.initialModel = reverseDeepMerge({}, this.model);
            };
        FormlyForm.decorators = [
            { type: core.Component, args: [{
                        selector: 'formly-form',
                        template: "\n    <formly-field *ngFor=\"let field of fields\"\n      [model]=\"field.model\" [form]=\"form\"\n      [field]=\"field\"\n      [ngClass]=\"field.className\"\n      [options]=\"options\">\n    </formly-field>\n    <ng-content></ng-content>\n  ",
                    },] },
        ];
        /** @nocollapse */
        FormlyForm.ctorParameters = function () {
            return [
                { type: FormlyFormBuilder },
                { type: FormlyFormExpression },
                { type: FormlyConfig },
                { type: forms.NgForm, decorators: [{ type: core.Optional }] },
                { type: forms.FormGroupDirective, decorators: [{ type: core.Optional }] },
                { type: FormlyForm, decorators: [{ type: core.Optional }, { type: core.SkipSelf }] }
            ];
        };
        FormlyForm.propDecorators = {
            model: [{ type: core.Input }],
            form: [{ type: core.Input }],
            fields: [{ type: core.Input }],
            options: [{ type: core.Input }],
            modelChange: [{ type: core.Output }],
            isRoot: [{ type: core.Input }]
        };
        return FormlyForm;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyField = (function () {
        function FormlyField(formlyConfig, componentFactoryResolver) {
            this.formlyConfig = formlyConfig;
            this.componentFactoryResolver = componentFactoryResolver;
            this.options = {};
            this.modelChange = new core.EventEmitter();
            this.componentRefs = [];
        }
        /**
         * @return {?}
         */
        FormlyField.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.afterContentInit);
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngAfterContentChecked = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.afterContentChecked);
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.afterViewInit);
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngAfterViewChecked = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.afterViewChecked);
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.doCheck);
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (!this.field.template) {
                    this.createFieldComponent();
                }
                this.lifeCycleHooks(this.lifecycle.onInit);
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        FormlyField.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                var _this = this;
                this.lifeCycleHooks(this.lifecycle.onChanges);
                this.componentRefs.forEach(function (ref) {
                    Object.assign(ref.instance, {
                        model: _this.model,
                        form: _this.form,
                        field: _this.field,
                        options: _this.options,
                    });
                });
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.lifeCycleHooks(this.lifecycle.onDestroy);
                this.componentRefs.forEach(function (componentRef) { return componentRef.destroy(); });
                this.componentRefs = [];
            };
        /**
         * @return {?}
         */
        FormlyField.prototype.createFieldComponent = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var /** @type {?} */ type = this.formlyConfig.getType(this.field.type);
                var /** @type {?} */ fieldComponent = this.fieldComponent;
                (this.field.wrappers || []).forEach(function (wrapperName) {
                    var /** @type {?} */ wrapperRef = _this.createComponent(fieldComponent, _this.formlyConfig.getWrapper(wrapperName).component);
                    fieldComponent = wrapperRef.instance.fieldComponent;
                });
                return this.createComponent(fieldComponent, type.component);
            };
        /**
         * @param {?} fieldComponent
         * @param {?} component
         * @return {?}
         */
        FormlyField.prototype.createComponent = /**
         * @param {?} fieldComponent
         * @param {?} component
         * @return {?}
         */
            function (fieldComponent, component) {
                var /** @type {?} */ componentFactory = this.componentFactoryResolver.resolveComponentFactory(component);
                var /** @type {?} */ ref = (fieldComponent.createComponent(componentFactory));
                Object.assign(ref.instance, {
                    model: this.model,
                    form: this.form,
                    field: this.field,
                    options: this.options,
                });
                this.componentRefs.push(ref);
                return ref;
            };
        Object.defineProperty(FormlyField.prototype, "lifecycle", {
            get: /**
             * @return {?}
             */ function () {
                return this.field.lifecycle || {};
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} callback
         * @return {?}
         */
        FormlyField.prototype.lifeCycleHooks = /**
         * @param {?} callback
         * @return {?}
         */
            function (callback) {
                if (callback) {
                    callback(this.form, this.field, this.model, this.options);
                }
            };
        FormlyField.decorators = [
            { type: core.Component, args: [{
                        selector: 'formly-field',
                        template: "\n    <ng-template #fieldComponent></ng-template>\n    <div *ngIf=\"field.template && !field.fieldGroup\" [innerHtml]=\"field.template\"></div>\n  ",
                        host: {
                            '[style.display]': 'field.hide ? "none":""',
                        },
                    },] },
        ];
        /** @nocollapse */
        FormlyField.ctorParameters = function () {
            return [
                { type: FormlyConfig },
                { type: core.ComponentFactoryResolver }
            ];
        };
        FormlyField.propDecorators = {
            model: [{ type: core.Input }],
            form: [{ type: core.Input }],
            field: [{ type: core.Input }],
            options: [{ type: core.Input }],
            modelChange: [{ type: core.Output }],
            fieldComponent: [{ type: core.ViewChild, args: ['fieldComponent', { read: core.ViewContainerRef },] }]
        };
        return FormlyField;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyAttributes = (function () {
        function FormlyAttributes(renderer, elementRef) {
            this.renderer = renderer;
            this.elementRef = elementRef;
            this.attributes = ['id', 'name', 'placeholder', 'tabindex', 'step', 'readonly'];
            this.statements = ['change', 'keydown', 'keyup', 'keypress', 'click', 'focus', 'blur'];
        }
        /**
         * @return {?}
         */
        FormlyAttributes.prototype.onFocus = /**
         * @return {?}
         */
            function () {
                this.field.focus = true;
            };
        /**
         * @return {?}
         */
        FormlyAttributes.prototype.onBlur = /**
         * @return {?}
         */
            function () {
                this.field.focus = false;
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        FormlyAttributes.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                var _this = this;
                if (changes["field"]) {
                    var /** @type {?} */ fieldChanges_1 = changes["field"];
                    this.attributes
                        .filter(function (attr) { return _this.canApplyRender(fieldChanges_1, attr); })
                        .forEach(function (attr) { return _this.renderer.setAttribute(_this.elementRef.nativeElement, attr, _this.getPropValue(_this.field, attr)); });
                    if (this.field.templateOptions && this.field.templateOptions.attributes) {
                        var /** @type {?} */ attributes_1 = this.field.templateOptions.attributes;
                        Object.keys(attributes_1).forEach(function (name) { return _this.renderer.setAttribute(_this.elementRef.nativeElement, name, /** @type {?} */ (attributes_1[name])); });
                    }
                    this.statements
                        .filter(function (statement) { return _this.canApplyRender(fieldChanges_1, statement); })
                        .forEach(function (statement) { return _this.renderer.listen(_this.elementRef.nativeElement, statement, _this.getStatementValue(statement)); });
                    if ((fieldChanges_1.previousValue || {}).focus !== (fieldChanges_1.currentValue || {}).focus && this.elementRef.nativeElement.focus) {
                        this.elementRef.nativeElement[this.field.focus ? 'focus' : 'blur']();
                    }
                }
            };
        /**
         * @param {?} field
         * @param {?} prop
         * @return {?}
         */
        FormlyAttributes.prototype.getPropValue = /**
         * @param {?} field
         * @param {?} prop
         * @return {?}
         */
            function (field, prop) {
                field = field || {};
                if (field.templateOptions && field.templateOptions[prop]) {
                    return field.templateOptions[prop];
                }
                return ((field))[prop] || '';
            };
        /**
         * @param {?} statement
         * @return {?}
         */
        FormlyAttributes.prototype.getStatementValue = /**
         * @param {?} statement
         * @return {?}
         */
            function (statement) {
                var _this = this;
                var /** @type {?} */ fn = this.field.templateOptions[statement];
                return function (event) { return fn(_this.field, event); };
            };
        /**
         * @param {?} fieldChange
         * @param {?} prop
         * @return {?}
         */
        FormlyAttributes.prototype.canApplyRender = /**
         * @param {?} fieldChange
         * @param {?} prop
         * @return {?}
         */
            function (fieldChange, prop) {
                var /** @type {?} */ currentValue = this.getPropValue(this.field, prop), /** @type {?} */ previousValue = this.getPropValue(fieldChange.previousValue, prop);
                if (previousValue !== currentValue) {
                    if (this.statements.indexOf(prop) !== -1) {
                        return typeof currentValue === 'function';
                    }
                    return true;
                }
                return false;
            };
        FormlyAttributes.decorators = [
            { type: core.Directive, args: [{
                        selector: '[formlyAttributes]',
                    },] },
        ];
        /** @nocollapse */
        FormlyAttributes.ctorParameters = function () {
            return [
                { type: core.Renderer2 },
                { type: core.ElementRef }
            ];
        };
        FormlyAttributes.propDecorators = {
            field: [{ type: core.Input, args: ['formlyAttributes',] }],
            onFocus: [{ type: core.HostListener, args: ['focus',] }],
            onBlur: [{ type: core.HostListener, args: ['blur',] }]
        };
        return FormlyAttributes;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @abstract
     */
    var Field = (function () {
        function Field() {
        }
        Object.defineProperty(Field.prototype, "key", {
            get: /**
             * @return {?}
             */ function () { return this.field.key; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Field.prototype, "formControl", {
            get: /**
             * @return {?}
             */ function () { return this.field.formControl; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Field.prototype, "to", {
            get: /**
             * @return {?}
             */ function () { return this.field.templateOptions; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Field.prototype, "showError", {
            get: /**
             * @return {?}
             */ function () { return this.options.showError(this); },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Field.prototype, "id", {
            get: /**
             * @return {?}
             */ function () { return this.field.id; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Field.prototype, "formState", {
            get: /**
             * @return {?}
             */ function () { return this.options.formState || {}; },
            enumerable: true,
            configurable: true
        });
        Field.propDecorators = {
            form: [{ type: core.Input }],
            field: [{ type: core.Input }],
            model: [{ type: core.Input }],
            options: [{ type: core.Input }]
        };
        return Field;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ FieldType = (function (_super) {
        __extends(FieldType, _super);
        function FieldType() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @return {?}
         */
        FieldType.prototype.ngOnInit = /**
         * @return {?}
         */
            function () { };
        /**
         * @param {?} changes
         * @return {?}
         */
        FieldType.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngAfterContentChecked = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngAfterViewChecked = /**
         * @return {?}
         */
            function () { };
        /**
         * @return {?}
         */
        FieldType.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () { };
        return FieldType;
    }(Field));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ FieldArrayType = (function (_super) {
        __extends(FieldArrayType, _super);
        function FieldArrayType(builder) {
            var _this = _super.call(this) || this;
            _this.builder = builder;
            return _this;
        }
        /**
         * @param {?=} i
         * @param {?=} initialModel
         * @return {?}
         */
        FieldArrayType.prototype.add = /**
         * @param {?=} i
         * @param {?=} initialModel
         * @return {?}
         */
            function (i, initialModel) {
                i = isNullOrUndefined(i) ? this.field.fieldGroup.length : i;
                this.model.splice(i, 0, initialModel ? clone(initialModel) : undefined);
                this.field.fieldGroup.splice(i, 0, __assign({}, clone(this.field.fieldArray)));
                this.field.fieldGroup.forEach(function (field, index) {
                    field.key = "" + index;
                });
                var /** @type {?} */ form = new forms.FormArray([]);
                this.builder.buildForm(form, [this.field.fieldGroup[i]], this.model, this.options);
                this.formControl.insert(i, form.at(0));
                ((this.options)).resetTrackModelChanges();
            };
        /**
         * @param {?} i
         * @return {?}
         */
        FieldArrayType.prototype.remove = /**
         * @param {?} i
         * @return {?}
         */
            function (i) {
                this.formControl.removeAt(i);
                this.field.fieldGroup.splice(i, 1);
                this.field.fieldGroup.forEach(function (f, index) { return f.key = "" + index; });
                this.model.splice(i, 1);
                ((this.options)).resetTrackModelChanges();
            };
        return FieldArrayType;
    }(FieldType));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ FieldWrapper = (function (_super) {
        __extends(FieldWrapper, _super);
        function FieldWrapper() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return FieldWrapper;
    }(Field));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyGroup = (function (_super) {
        __extends(FormlyGroup, _super);
        function FormlyGroup() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        FormlyGroup.decorators = [
            { type: core.Component, args: [{
                        selector: 'formly-group',
                        template: "\n    <formly-form\n      [fields]=\"field.fieldGroup\"\n      [isRoot]=\"false\"\n      [model]=\"model\"\n      [form]=\"field.formControl || form\"\n      [options]=\"options\"\n      [ngClass]=\"field.fieldGroupClassName\">\n      <ng-content></ng-content>\n    </formly-form>\n  ",
                    },] },
        ];
        return FormlyGroup;
    }(FieldType));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyValidationMessage = (function () {
        function FormlyValidationMessage(formlyConfig) {
            this.formlyConfig = formlyConfig;
        }
        Object.defineProperty(FormlyValidationMessage.prototype, "fieldForm", {
            set: /**
             * @param {?} control
             * @return {?}
             */ function (control) {
                console.warn("formly-validation-message: Passing 'fieldForm' input is deprecated and it will be removed in the 4.0 version.");
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(FormlyValidationMessage.prototype, "errorMessage", {
            get: /**
             * @return {?}
             */ function () {
                var /** @type {?} */ fieldForm = this.field.formControl;
                for (var /** @type {?} */ error in fieldForm.errors) {
                    if (fieldForm.errors.hasOwnProperty(error)) {
                        var /** @type {?} */ message = this.formlyConfig.getValidatorMessage(error);
                        if (this.field.validation && this.field.validation.messages && this.field.validation.messages[error]) {
                            message = this.field.validation.messages[error];
                        }
                        if (this.field.validators && this.field.validators[error] && this.field.validators[error].message) {
                            message = this.field.validators[error].message;
                        }
                        if (this.field.asyncValidators && this.field.asyncValidators[error] && this.field.asyncValidators[error].message) {
                            message = this.field.asyncValidators[error].message;
                        }
                        if (typeof message === 'function') {
                            return message(fieldForm.errors[error], this.field);
                        }
                        return message;
                    }
                }
            },
            enumerable: true,
            configurable: true
        });
        FormlyValidationMessage.decorators = [
            { type: core.Component, args: [{
                        selector: 'formly-validation-message',
                        template: "{{ errorMessage }}",
                    },] },
        ];
        /** @nocollapse */
        FormlyValidationMessage.ctorParameters = function () {
            return [
                { type: FormlyConfig }
            ];
        };
        FormlyValidationMessage.propDecorators = {
            field: [{ type: core.Input }],
            fieldForm: [{ type: core.Input }]
        };
        return FormlyValidationMessage;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var FormlyModule = (function () {
        function FormlyModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        FormlyModule.forRoot = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: FormlyModule,
                    providers: [
                        FormlyFormBuilder,
                        FormlyFormExpression,
                        FormlyConfig,
                        { provide: FORMLY_CONFIG_TOKEN, useValue: { types: [{ name: 'formly-group', component: FormlyGroup }] }, multi: true },
                        { provide: FORMLY_CONFIG_TOKEN, useValue: config, multi: true },
                        { provide: core.ANALYZE_FOR_ENTRY_COMPONENTS, useValue: config, multi: true },
                    ],
                };
            };
        /**
         * @param {?=} config
         * @return {?}
         */
        FormlyModule.forChild = /**
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: FormlyModule,
                    providers: [
                        { provide: FORMLY_CONFIG_TOKEN, useValue: config, multi: true },
                        { provide: core.ANALYZE_FOR_ENTRY_COMPONENTS, useValue: config, multi: true },
                    ],
                };
            };
        FormlyModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage],
                        entryComponents: [FormlyGroup],
                        exports: [FormlyForm, FormlyField, FormlyAttributes, FormlyGroup, FormlyValidationMessage],
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                        ],
                    },] },
        ];
        return FormlyModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.FormlyForm = FormlyForm;
    exports.FormlyField = FormlyField;
    exports.FormlyAttributes = FormlyAttributes;
    exports.FormlyConfig = FormlyConfig;
    exports.FormlyFormBuilder = FormlyFormBuilder;
    exports.Field = Field;
    exports.FieldType = FieldType;
    exports.FieldArrayType = FieldArrayType;
    exports.FieldWrapper = FieldWrapper;
    exports.FormlyModule = FormlyModule;
    exports.c = FormlyGroup;
    exports.a = FORMLY_CONFIG_TOKEN;
    exports.b = FormlyFormExpression;
    exports.d = FormlyValidationMessage;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWZvcm1seS1jb3JlLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbbnVsbCwibmc6Ly9Abmd4LWZvcm1seS9jb3JlL2xpYi91dGlscy50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvc2VydmljZXMvZm9ybWx5LmNvbmZpZy50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvc2VydmljZXMvZm9ybWx5LmZvcm0uZXhwcmVzc2lvbi50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvc2VydmljZXMvZm9ybWx5LmZvcm0uYnVpbGRlci50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvY29tcG9uZW50cy9mb3JtbHkuZm9ybS50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvY29tcG9uZW50cy9mb3JtbHkuZmllbGQudHMiLCJuZzovL0BuZ3gtZm9ybWx5L2NvcmUvbGliL2NvbXBvbmVudHMvZm9ybWx5LmF0dHJpYnV0ZXMudHMiLCJuZzovL0BuZ3gtZm9ybWx5L2NvcmUvbGliL3RlbXBsYXRlcy9maWVsZC50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvdGVtcGxhdGVzL2ZpZWxkLnR5cGUudHMiLCJuZzovL0BuZ3gtZm9ybWx5L2NvcmUvbGliL3RlbXBsYXRlcy9maWVsZC1hcnJheS50eXBlLnRzIiwibmc6Ly9Abmd4LWZvcm1seS9jb3JlL2xpYi90ZW1wbGF0ZXMvZmllbGQud3JhcHBlci50cyIsIm5nOi8vQG5neC1mb3JtbHkvY29yZS9saWIvY29tcG9uZW50cy9mb3JtbHkuZ3JvdXAudHMiLCJuZzovL0BuZ3gtZm9ybWx5L2NvcmUvbGliL3RlbXBsYXRlcy9mb3JtbHkudmFsaWRhdGlvbi1tZXNzYWdlLnRzIiwibmc6Ly9Abmd4LWZvcm1seS9jb3JlL2xpYi9jb3JlLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgRm9ybWx5RmllbGRDb25maWcgfSBmcm9tICcuL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmllbGRJZChmb3JtSWQ6IHN0cmluZywgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnLCBpbmRleDogc3RyaW5nfG51bWJlcikge1xuICBpZiAoZmllbGQuaWQpIHJldHVybiBmaWVsZC5pZDtcbiAgbGV0IHR5cGUgPSBmaWVsZC50eXBlO1xuICBpZiAoIXR5cGUgJiYgZmllbGQudGVtcGxhdGUpIHR5cGUgPSAndGVtcGxhdGUnO1xuICByZXR1cm4gW2Zvcm1JZCwgdHlwZSwgZmllbGQua2V5LCBpbmRleF0uam9pbignXycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5UGF0aChmaWVsZDoge2tleT86IHN0cmluZ3xzdHJpbmdbXSwgZmllbGRHcm91cD86IGFueSwgZmllbGRBcnJheT86IGFueX0pOiAoc3RyaW5nfG51bWJlcilbXSB7XG4gIC8qIFdlIHN0b3JlIHRoZSBrZXlQYXRoIGluIHRoZSBmaWVsZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmcmVxdWVudGx5LiAqL1xuICBpZiAoISg8YW55PiBmaWVsZClbJ19mb3JtbHlLZXlQYXRoJ10gfHwgKDxhbnk+IGZpZWxkKVsnX2Zvcm1seUtleVBhdGgnXS5rZXkgIT09IGZpZWxkLmtleSkge1xuICAgIGxldCBrZXlQYXRoOiAoc3RyaW5nfG51bWJlcilbXSA9IFtdO1xuICAgIGlmIChmaWVsZC5rZXkpIHtcbiAgICAgIC8qIEFsc28gYWxsb3cgZm9yIGFuIGFycmF5IGtleSwgaGVuY2UgdGhlIHR5cGUgY2hlY2sgICovXG4gICAgICBsZXQgcGF0aEVsZW1lbnRzID0gdHlwZW9mIGZpZWxkLmtleSA9PT0gJ3N0cmluZycgPyBmaWVsZC5rZXkuc3BsaXQoJy4nKSA6IGZpZWxkLmtleTtcbiAgICAgIGZvciAobGV0IHBhdGhFbGVtZW50IG9mIHBhdGhFbGVtZW50cykge1xuICAgICAgICBpZiAodHlwZW9mIHBhdGhFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIC8qIHJlcGxhY2UgcGF0aHMgb2YgdGhlIGZvcm0gbmFtZXNbMl0gYnkgbmFtZXMuMiwgY2ZyLiBhbmd1bGFyIGZvcm1seSAqL1xuICAgICAgICAgIHBhdGhFbGVtZW50ID0gcGF0aEVsZW1lbnQucmVwbGFjZSgvXFxbKFxcdyspXFxdL2csICcuJDEnKTtcbiAgICAgICAgICBrZXlQYXRoID0ga2V5UGF0aC5jb25jYXQocGF0aEVsZW1lbnQuc3BsaXQoJy4nKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAga2V5UGF0aC5wdXNoKHBhdGhFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlQYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBwYXRoRWxlbWVudCA9IGtleVBhdGhbaV07XG4gICAgICAgIGlmICh0eXBlb2YgcGF0aEVsZW1lbnQgPT09ICdzdHJpbmcnICYmIHN0cmluZ0lzSW50ZWdlcihwYXRoRWxlbWVudCkpICB7XG4gICAgICAgICAga2V5UGF0aFtpXSA9IHBhcnNlSW50KHBhdGhFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAoPGFueT4gZmllbGQpWydfZm9ybWx5S2V5UGF0aCddID0ge1xuICAgICAga2V5OiBmaWVsZC5rZXksXG4gICAgICBwYXRoOiBrZXlQYXRoLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gKDxhbnk+IGZpZWxkKVsnX2Zvcm1seUtleVBhdGgnXS5wYXRoLnNsaWNlKDApO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdJc0ludGVnZXIoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZChzdHIpICYmIC9eXFxkKyQvLnRlc3Qoc3RyKTtcbn1cblxuZXhwb3J0IGNvbnN0IEZPUk1MWV9WQUxJREFUT1JTID0gWydyZXF1aXJlZCcsICdwYXR0ZXJuJywgJ21pbkxlbmd0aCcsICdtYXhMZW5ndGgnLCAnbWluJywgJ21heCddO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmllbGRNb2RlbChtb2RlbDogYW55LCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcsIGNvbnN0cnVjdEVtcHR5T2JqZWN0czogYm9vbGVhbik6IGFueSB7XG4gIGxldCBrZXlQYXRoOiAoc3RyaW5nfG51bWJlcilbXSA9IGdldEtleVBhdGgoZmllbGQpO1xuICBsZXQgdmFsdWU6IGFueSA9IG1vZGVsO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleVBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgcGF0aCA9IGtleVBhdGhbaV07XG4gICAgbGV0IHBhdGhWYWx1ZSA9IHZhbHVlW3BhdGhdO1xuICAgIGlmIChpc051bGxPclVuZGVmaW5lZChwYXRoVmFsdWUpICYmIGNvbnN0cnVjdEVtcHR5T2JqZWN0cykge1xuICAgICAgaWYgKGkgPCBrZXlQYXRoLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgLyogVE9ETz8gOiBJdCB3b3VsZCBiZSBtdWNoIG5pY2VyIGlmIHdlIGNvdWxkIGNvbnN0cnVjdCBvYmplY3QgaW5zdGFuY2VzIG9mIHRoZSBjb3JyZWN0IGNsYXNzLCBmb3IgaW5zdGFuY2UgYnkgdXNpbmcgZmFjdG9yaWVzLiAqL1xuICAgICAgICB2YWx1ZVtwYXRoXSA9IHR5cGVvZiBrZXlQYXRoW2kgKyAxXSA9PT0gJ251bWJlcicgPyBbXSA6IHt9O1xuICAgICAgfSBlbHNlIGlmIChmaWVsZC5maWVsZEdyb3VwICYmICFmaWVsZC5maWVsZEFycmF5KSB7XG4gICAgICAgIHZhbHVlW3BhdGhdID0ge307XG4gICAgICB9IGVsc2UgaWYgKGZpZWxkLmZpZWxkQXJyYXkpIHtcbiAgICAgICAgdmFsdWVbcGF0aF0gPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFsdWUgPSB2YWx1ZVtwYXRoXTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduTW9kZWxUb0ZpZWxkcyhmaWVsZHM6IEZvcm1seUZpZWxkQ29uZmlnW10sIG1vZGVsOiBhbnkpIHtcbiAgZmllbGRzLmZvckVhY2goKGZpZWxkLCBpbmRleCkgPT4ge1xuICAgIGlmICghaXNVbmRlZmluZWQoZmllbGQuZGVmYXVsdFZhbHVlKSAmJiBpc1VuZGVmaW5lZChnZXRWYWx1ZUZvcktleShtb2RlbCwgZmllbGQua2V5KSkpIHtcbiAgICAgIGFzc2lnbk1vZGVsVmFsdWUobW9kZWwsIGZpZWxkLmtleSwgZmllbGQuZGVmYXVsdFZhbHVlKTtcbiAgICB9XG5cbiAgICAoZmllbGQgYXMgYW55KS5tb2RlbCA9IG1vZGVsO1xuICAgIGlmIChmaWVsZC5rZXkgJiYgKGZpZWxkLmZpZWxkR3JvdXAgfHwgZmllbGQuZmllbGRBcnJheSkpIHtcbiAgICAgIChmaWVsZCBhcyBhbnkpLm1vZGVsID0gZ2V0RmllbGRNb2RlbChtb2RlbCwgZmllbGQsIHRydWUpO1xuICAgIH1cblxuICAgIGlmIChmaWVsZC5maWVsZEdyb3VwKSB7XG4gICAgICBhc3NpZ25Nb2RlbFRvRmllbGRzKGZpZWxkLmZpZWxkR3JvdXAsIGZpZWxkLm1vZGVsKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduTW9kZWxWYWx1ZShtb2RlbDogYW55LCBwYXRoOiBzdHJpbmcgfCAoc3RyaW5nIHwgbnVtYmVyKVtdLCB2YWx1ZTogYW55KSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXRoID0gZ2V0S2V5UGF0aCh7a2V5OiBwYXRofSk7XG4gIH1cblxuICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgZSA9IHBhdGguc2hpZnQoKTtcbiAgICBpZiAoIW1vZGVsW2VdIHx8ICFpc09iamVjdChtb2RlbFtlXSkpIHtcbiAgICAgIG1vZGVsW2VdID0gdHlwZW9mIHBhdGhbMF0gPT09ICdzdHJpbmcnID8ge30gOiBbXTtcbiAgICB9XG4gICAgYXNzaWduTW9kZWxWYWx1ZShtb2RlbFtlXSwgcGF0aCwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIG1vZGVsW3BhdGhbMF1dID0gdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlRm9yS2V5KG1vZGVsOiBhbnksIHBhdGg6IHN0cmluZyB8IChzdHJpbmcgfCBudW1iZXIpW10pOiBhbnkge1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgcGF0aCA9IGdldEtleVBhdGgoe2tleTogcGF0aH0pO1xuICB9XG4gIGlmIChwYXRoLmxlbmd0aCA+IDEpIHtcbiAgICBjb25zdCBlID0gcGF0aC5zaGlmdCgpO1xuICAgIGlmICghbW9kZWxbZV0pIHtcbiAgICAgIG1vZGVsW2VdID0gdHlwZW9mIHBhdGhbMF0gPT09ICdzdHJpbmcnID8ge30gOiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFZhbHVlRm9yS2V5KG1vZGVsW2VdLCBwYXRoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbW9kZWxbcGF0aFswXV07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEtleShjb250cm9sS2V5OiBzdHJpbmcsIGFjdHVhbEtleTogc3RyaW5nKSB7XG4gIHJldHVybiBhY3R1YWxLZXkgPyBhY3R1YWxLZXkgKyAnLicgKyBjb250cm9sS2V5IDogY29udHJvbEtleTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VEZWVwTWVyZ2UoZGVzdDogYW55LCAuLi5hcmdzOiBhbnlbXSkge1xuICBhcmdzLmZvckVhY2goc3JjID0+IHtcbiAgICBmb3IgKGxldCBzcmNBcmcgaW4gc3JjKSB7XG4gICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoZGVzdFtzcmNBcmddKSB8fCBpc0JsYW5rU3RyaW5nKGRlc3Rbc3JjQXJnXSkpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oc3JjW3NyY0FyZ10pKSB7XG4gICAgICAgICAgZGVzdFtzcmNBcmddID0gc3JjW3NyY0FyZ107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVzdFtzcmNBcmddID0gY2xvbmUoc3JjW3NyY0FyZ10pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9iakFuZFNhbWVUeXBlKGRlc3Rbc3JjQXJnXSwgc3JjW3NyY0FyZ10pKSB7XG4gICAgICAgIHJldmVyc2VEZWVwTWVyZ2UoZGVzdFtzcmNBcmddLCBzcmNbc3JjQXJnXSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRlc3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZCh2YWx1ZTogYW55KSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWU6IGFueSkge1xuICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQmxhbmtTdHJpbmcodmFsdWU6IGFueSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZTogYW55KSB7XG4gIHJldHVybiB0eXBlb2YodmFsdWUpID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2JqQW5kU2FtZVR5cGUob2JqMTogYW55LCBvYmoyOiBhbnkpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KG9iajEpICYmIGlzT2JqZWN0KG9iajIpICYmXG4gICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iajEpID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqMik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh4OiBhbnkpIHtcbiAgcmV0dXJuIHggIT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZSh2YWx1ZTogYW55KTogYW55IHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWUgaW5zdGFuY2VvZiBSZWdFeHAgfHwgdmFsdWUgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZS5nZXRUaW1lKCkpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLnNsaWNlKDApLm1hcCh2ID0+IGNsb25lKHYpKTtcbiAgfVxuXG4gIHZhbHVlID0gT2JqZWN0LmFzc2lnbih7fSwgdmFsdWUpO1xuICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChrID0+IHZhbHVlW2tdID0gY2xvbmUodmFsdWVba10pKTtcblxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBldmFsU3RyaW5nRXhwcmVzc2lvbihleHByZXNzaW9uOiBzdHJpbmcsIGFyZ05hbWVzOiBzdHJpbmdbXSkge1xuICB0cnkge1xuICAgIHJldHVybiBGdW5jdGlvbi5iaW5kLmFwcGx5KEZ1bmN0aW9uLCBbdm9pZCAwXS5jb25jYXQoYXJnTmFtZXMuY29uY2F0KGByZXR1cm4gJHtleHByZXNzaW9ufTtgKSkpKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWxFeHByZXNzaW9uVmFsdWVTZXR0ZXIoZXhwcmVzc2lvbjogc3RyaW5nLCBhcmdOYW1lczogc3RyaW5nW10pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gRnVuY3Rpb24uYmluZFxuICAgICAgLmFwcGx5KEZ1bmN0aW9uLCBbdm9pZCAwXS5jb25jYXQoYXJnTmFtZXMuY29uY2F0KGAke2V4cHJlc3Npb259ID0gZXhwcmVzc2lvblZhbHVlO2ApKSkoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZXZhbEV4cHJlc3Npb24oZXhwcmVzc2lvbjogc3RyaW5nIHwgRnVuY3Rpb24gfCBib29sZWFuLCB0aGlzQXJnOiBhbnksIGFyZ1ZhbDogYW55W10pOiBhbnkge1xuICBpZiAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24uYXBwbHkodGhpc0FyZywgYXJnVmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZXhwcmVzc2lvbiA/IHRydWUgOiBmYWxzZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0LCBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9ycywgRm9ybUdyb3VwLCBGb3JtQXJyYXksIEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSAnLi8uLi90ZW1wbGF0ZXMvZmllbGQnO1xuaW1wb3J0IHsgcmV2ZXJzZURlZXBNZXJnZSB9IGZyb20gJy4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgRm9ybWx5RmllbGRDb25maWcsIEZvcm1seUZvcm1PcHRpb25zIH0gZnJvbSAnLi4vY29tcG9uZW50cy9mb3JtbHkuZmllbGQuY29uZmlnJztcblxuZXhwb3J0IGNvbnN0IEZPUk1MWV9DT05GSUdfVE9LRU4gPSBuZXcgSW5qZWN0aW9uVG9rZW48Rm9ybWx5Q29uZmlnPignRk9STUxZX0NPTkZJR19UT0tFTicpO1xuXG4vKipcbiAqIE1haW50YWlucyBsaXN0IG9mIGZvcm1seSBmaWVsZCBkaXJlY3RpdmUgdHlwZXMuIFRoaXMgY2FuIGJlIHVzZWQgdG8gcmVnaXN0ZXIgbmV3IGZpZWxkIHRlbXBsYXRlcy5cbiAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEZvcm1seUNvbmZpZyB7XG4gIHR5cGVzOiB7W25hbWU6IHN0cmluZ106IFR5cGVPcHRpb259ID0ge307XG4gIHZhbGlkYXRvcnM6IHsgW25hbWU6IHN0cmluZ106IFZhbGlkYXRvck9wdGlvbiB9ID0ge307XG4gIHdyYXBwZXJzOiB7IFtuYW1lOiBzdHJpbmddOiBXcmFwcGVyT3B0aW9uIH0gPSB7fTtcbiAgbWVzc2FnZXM6IHsgW25hbWU6IHN0cmluZ106IHN0cmluZyB8ICgoZXJyb3I6IGFueSwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSA9PiBzdHJpbmcpOyB9ID0ge307XG5cbiAgdGVtcGxhdGVNYW5pcHVsYXRvcnM6IHtcbiAgICBwcmVXcmFwcGVyOiBNYW5pcHVsYXRvcldyYXBwZXJbXTtcbiAgICBwb3N0V3JhcHBlcjogTWFuaXB1bGF0b3JXcmFwcGVyW107XG4gIH0gPSB7XG4gICAgcHJlV3JhcHBlcjogW10sXG4gICAgcG9zdFdyYXBwZXI6IFtdLFxuICB9O1xuXG4gIGV4dHJhczoge1xuICAgIGZpZWxkVHJhbnNmb3JtPzogKChmaWVsZHM6IEZvcm1seUZpZWxkQ29uZmlnW10sIG1vZGVsOiBhbnksIGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwgb3B0aW9uczogRm9ybWx5Rm9ybU9wdGlvbnMpID0+IEZvcm1seUZpZWxkQ29uZmlnW10pW10sXG4gICAgc2hvd0Vycm9yPzogKGZpZWxkOiBGaWVsZCkgPT4gYm9vbGVhbjtcbiAgfSA9IHtcbiAgICBmaWVsZFRyYW5zZm9ybTogdW5kZWZpbmVkLFxuICAgIHNob3dFcnJvcjogZnVuY3Rpb24oZmllbGQ6IEZpZWxkKSB7XG4gICAgICByZXR1cm4gZmllbGQuZm9ybUNvbnRyb2wgJiYgZmllbGQuZm9ybUNvbnRyb2wuaW52YWxpZCAmJiAoZmllbGQuZm9ybUNvbnRyb2wudG91Y2hlZCB8fCAoZmllbGQub3B0aW9ucy5wYXJlbnRGb3JtICYmIGZpZWxkLm9wdGlvbnMucGFyZW50Rm9ybS5zdWJtaXR0ZWQpIHx8IChmaWVsZC5maWVsZC52YWxpZGF0aW9uICYmIGZpZWxkLmZpZWxkLnZhbGlkYXRpb24uc2hvdykpO1xuICAgIH0sXG4gIH07XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChGT1JNTFlfQ09ORklHX1RPS0VOKSBjb25maWdzOiBDb25maWdPcHRpb25bXSA9IFtdKSB7XG4gICAgY29uZmlncy5mb3JFYWNoKGNvbmZpZyA9PiB0aGlzLmFkZENvbmZpZyhjb25maWcpKTtcbiAgfVxuXG4gIGFkZENvbmZpZyhjb25maWc6IENvbmZpZ09wdGlvbikge1xuICAgIGlmIChjb25maWcudHlwZXMpIHtcbiAgICAgIGNvbmZpZy50eXBlcy5mb3JFYWNoKHR5cGUgPT4gdGhpcy5zZXRUeXBlKHR5cGUpKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy52YWxpZGF0b3JzKSB7XG4gICAgICBjb25maWcudmFsaWRhdG9ycy5mb3JFYWNoKHZhbGlkYXRvciA9PiB0aGlzLnNldFZhbGlkYXRvcih2YWxpZGF0b3IpKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy53cmFwcGVycykge1xuICAgICAgY29uZmlnLndyYXBwZXJzLmZvckVhY2god3JhcHBlciA9PiB0aGlzLnNldFdyYXBwZXIod3JhcHBlcikpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm1hbmlwdWxhdG9ycykge1xuICAgICAgY29uZmlnLm1hbmlwdWxhdG9ycy5mb3JFYWNoKG1hbmlwdWxhdG9yID0+IHRoaXMuc2V0TWFuaXB1bGF0b3IobWFuaXB1bGF0b3IpKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy52YWxpZGF0aW9uTWVzc2FnZXMpIHtcbiAgICAgIGNvbmZpZy52YWxpZGF0aW9uTWVzc2FnZXMuZm9yRWFjaCh2YWxpZGF0aW9uID0+IHRoaXMuYWRkVmFsaWRhdG9yTWVzc2FnZSh2YWxpZGF0aW9uLm5hbWUsIHZhbGlkYXRpb24ubWVzc2FnZSkpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmV4dHJhcykge1xuICAgICAgdGhpcy5leHRyYXMgPSB7IC4uLnRoaXMuZXh0cmFzLCAuLi5jb25maWcuZXh0cmFzIH07XG4gICAgfVxuICB9XG5cbiAgc2V0VHlwZShvcHRpb25zOiBUeXBlT3B0aW9uIHwgVHlwZU9wdGlvbltdKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcbiAgICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB0aGlzLnNldFR5cGUob3B0aW9uKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy50eXBlc1tvcHRpb25zLm5hbWVdKSB7XG4gICAgICAgIHRoaXMudHlwZXNbb3B0aW9ucy5uYW1lXSA9IDxUeXBlT3B0aW9uPnt9O1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlc1tvcHRpb25zLm5hbWVdLmNvbXBvbmVudCA9IG9wdGlvbnMuY29tcG9uZW50O1xuICAgICAgdGhpcy50eXBlc1tvcHRpb25zLm5hbWVdLm5hbWUgPSBvcHRpb25zLm5hbWU7XG4gICAgICB0aGlzLnR5cGVzW29wdGlvbnMubmFtZV0uZXh0ZW5kcyA9IG9wdGlvbnMuZXh0ZW5kcztcbiAgICAgIHRoaXMudHlwZXNbb3B0aW9ucy5uYW1lXS5kZWZhdWx0T3B0aW9ucyA9IG9wdGlvbnMuZGVmYXVsdE9wdGlvbnM7XG4gICAgICBpZiAob3B0aW9ucy53cmFwcGVycykge1xuICAgICAgICBvcHRpb25zLndyYXBwZXJzLmZvckVhY2goKHdyYXBwZXIpID0+IHRoaXMuc2V0VHlwZVdyYXBwZXIob3B0aW9ucy5uYW1lLCB3cmFwcGVyKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0VHlwZShuYW1lOiBzdHJpbmcpOiBUeXBlT3B0aW9uIHtcbiAgICBpZiAoIXRoaXMudHlwZXNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgW0Zvcm1seSBFcnJvcl0gVGhlcmUgaXMgbm8gdHlwZSBieSB0aGUgbmFtZSBvZiBcIiR7bmFtZX1cImApO1xuICAgIH1cblxuICAgIHRoaXMubWVyZ2VFeHRlbmRlZFR5cGUobmFtZSk7XG5cbiAgICByZXR1cm4gdGhpcy50eXBlc1tuYW1lXTtcbiAgfVxuXG4gIGdldE1lcmdlZEZpZWxkKGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZyA9IHt9KTogYW55IHtcbiAgICBsZXQgbmFtZSA9IGZpZWxkLnR5cGU7XG4gICAgaWYgKCF0aGlzLnR5cGVzW25hbWVdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFtGb3JtbHkgRXJyb3JdIFRoZXJlIGlzIG5vIHR5cGUgYnkgdGhlIG5hbWUgb2YgXCIke25hbWV9XCJgKTtcbiAgICB9XG5cbiAgICB0aGlzLm1lcmdlRXh0ZW5kZWRUeXBlKG5hbWUpO1xuICAgIGlmICh0aGlzLnR5cGVzW25hbWVdLmRlZmF1bHRPcHRpb25zKSB7XG4gICAgICByZXZlcnNlRGVlcE1lcmdlKGZpZWxkLCB0aGlzLnR5cGVzW25hbWVdLmRlZmF1bHRPcHRpb25zKTtcbiAgICB9XG5cbiAgICBsZXQgZXh0ZW5kRGVmYXVsdHMgPSB0aGlzLnR5cGVzW25hbWVdLmV4dGVuZHMgJiYgdGhpcy5nZXRUeXBlKHRoaXMudHlwZXNbbmFtZV0uZXh0ZW5kcykuZGVmYXVsdE9wdGlvbnM7XG4gICAgaWYgKGV4dGVuZERlZmF1bHRzKSB7XG4gICAgICByZXZlcnNlRGVlcE1lcmdlKGZpZWxkLCBleHRlbmREZWZhdWx0cyk7XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkICYmIGZpZWxkLm9wdGlvbnNUeXBlcykge1xuICAgICAgZmllbGQub3B0aW9uc1R5cGVzLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgbGV0IGRlZmF1bHRPcHRpb25zID0gdGhpcy5nZXRUeXBlKG9wdGlvbikuZGVmYXVsdE9wdGlvbnM7XG4gICAgICAgIGlmIChkZWZhdWx0T3B0aW9ucykge1xuICAgICAgICAgIHJldmVyc2VEZWVwTWVyZ2UoZmllbGQsIGRlZmF1bHRPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFmaWVsZC5jb21wb25lbnQpIHtcbiAgICAgIGZpZWxkLmNvbXBvbmVudCA9IHRoaXMudHlwZXNbbmFtZV0uY29tcG9uZW50O1xuICAgIH1cblxuICAgIGlmICghZmllbGQud3JhcHBlcnMpIHtcbiAgICAgIGZpZWxkLndyYXBwZXJzID0gdGhpcy50eXBlc1tuYW1lXS53cmFwcGVycztcbiAgICB9XG4gIH1cblxuICBzZXRXcmFwcGVyKG9wdGlvbnM6IFdyYXBwZXJPcHRpb24pIHtcbiAgICB0aGlzLndyYXBwZXJzW29wdGlvbnMubmFtZV0gPSBvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLnR5cGVzKSB7XG4gICAgICBvcHRpb25zLnR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgdGhpcy5zZXRUeXBlV3JhcHBlcih0eXBlLCBvcHRpb25zLm5hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0V3JhcHBlcihuYW1lOiBzdHJpbmcpOiBXcmFwcGVyT3B0aW9uIHtcbiAgICBpZiAoIXRoaXMud3JhcHBlcnNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgW0Zvcm1seSBFcnJvcl0gVGhlcmUgaXMgbm8gd3JhcHBlciBieSB0aGUgbmFtZSBvZiBcIiR7bmFtZX1cImApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBwZXJzW25hbWVdO1xuICB9XG5cbiAgc2V0VHlwZVdyYXBwZXIodHlwZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudHlwZXNbdHlwZV0pIHtcbiAgICAgIHRoaXMudHlwZXNbdHlwZV0gPSA8VHlwZU9wdGlvbj57fTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnR5cGVzW3R5cGVdLndyYXBwZXJzKSB7XG4gICAgICB0aGlzLnR5cGVzW3R5cGVdLndyYXBwZXJzID0gPFtzdHJpbmddPltdO1xuICAgIH1cbiAgICB0aGlzLnR5cGVzW3R5cGVdLndyYXBwZXJzLnB1c2gobmFtZSk7XG4gIH1cblxuICBzZXRWYWxpZGF0b3Iob3B0aW9uczogVmFsaWRhdG9yT3B0aW9uKSB7XG4gICAgdGhpcy52YWxpZGF0b3JzW29wdGlvbnMubmFtZV0gPSBvcHRpb25zO1xuICB9XG5cbiAgZ2V0VmFsaWRhdG9yKG5hbWU6IHN0cmluZyk6IFZhbGlkYXRvck9wdGlvbiB7XG4gICAgaWYgKCF0aGlzLnZhbGlkYXRvcnNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgW0Zvcm1seSBFcnJvcl0gVGhlcmUgaXMgbm8gdmFsaWRhdG9yIGJ5IHRoZSBuYW1lIG9mIFwiJHtuYW1lfVwiYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudmFsaWRhdG9yc1tuYW1lXTtcbiAgfVxuXG4gIGFkZFZhbGlkYXRvck1lc3NhZ2UobmFtZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgfCAoKGVycm9yOiBhbnksIGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykgPT4gc3RyaW5nKSkge1xuICAgIHRoaXMubWVzc2FnZXNbbmFtZV0gPSBtZXNzYWdlO1xuICB9XG5cbiAgZ2V0VmFsaWRhdG9yTWVzc2FnZShuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlc1tuYW1lXTtcbiAgfVxuXG4gIHNldE1hbmlwdWxhdG9yKG1hbmlwdWxhdG9yOiBNYW5pcHVsYXRvck9wdGlvbikge1xuICAgIG5ldyBtYW5pcHVsYXRvci5jbGFzcygpW21hbmlwdWxhdG9yLm1ldGhvZF0odGhpcyk7XG4gIH1cblxuICBwcml2YXRlIG1lcmdlRXh0ZW5kZWRUeXBlKG5hbWU6IHN0cmluZykge1xuICAgIGlmICghdGhpcy50eXBlc1tuYW1lXS5leHRlbmRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW5kZWRUeXBlID0gdGhpcy5nZXRUeXBlKHRoaXMudHlwZXNbbmFtZV0uZXh0ZW5kcyk7XG4gICAgaWYgKCF0aGlzLnR5cGVzW25hbWVdLmNvbXBvbmVudCkge1xuICAgICAgdGhpcy50eXBlc1tuYW1lXS5jb21wb25lbnQgPSBleHRlbmRlZFR5cGUuY29tcG9uZW50O1xuICAgIH1cblxuICAgIGlmICghdGhpcy50eXBlc1tuYW1lXS53cmFwcGVycykge1xuICAgICAgdGhpcy50eXBlc1tuYW1lXS53cmFwcGVycyA9IGV4dGVuZGVkVHlwZS53cmFwcGVycztcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBpbnRlcmZhY2UgVHlwZU9wdGlvbiB7XG4gIG5hbWU6IHN0cmluZztcbiAgY29tcG9uZW50PzogYW55O1xuICB3cmFwcGVycz86IHN0cmluZ1tdO1xuICBleHRlbmRzPzogc3RyaW5nO1xuICBkZWZhdWx0T3B0aW9ucz86IEZvcm1seUZpZWxkQ29uZmlnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdyYXBwZXJPcHRpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGNvbXBvbmVudDogYW55O1xuICB0eXBlcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkVmFsaWRhdG9yRm4ge1xuICAoYzogQWJzdHJhY3RDb250cm9sLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpOiBWYWxpZGF0aW9uRXJyb3JzIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0b3JPcHRpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhbGlkYXRpb246IEZpZWxkVmFsaWRhdG9yRm47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvbk1lc3NhZ2VPcHRpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZyB8ICgoZXJyb3I6IGFueSwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSA9PiBzdHJpbmcpO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hbmlwdWxhdG9yT3B0aW9uIHtcbiAgY2xhc3M/OiB7IG5ldyAoKTogYW55IH07XG4gIG1ldGhvZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYW5pcHVsYXRvcldyYXBwZXIge1xuICAoZjogRm9ybWx5RmllbGRDb25maWcpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVNYW5pcHVsYXRvcnMge1xuICBwcmVXcmFwcGVyPzogTWFuaXB1bGF0b3JXcmFwcGVyW107XG4gIHBvc3RXcmFwcGVyPzogTWFuaXB1bGF0b3JXcmFwcGVyW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnT3B0aW9uIHtcbiAgdHlwZXM/OiBUeXBlT3B0aW9uW107XG4gIHdyYXBwZXJzPzogV3JhcHBlck9wdGlvbltdO1xuICB2YWxpZGF0b3JzPzogVmFsaWRhdG9yT3B0aW9uW107XG4gIHZhbGlkYXRpb25NZXNzYWdlcz86IFZhbGlkYXRpb25NZXNzYWdlT3B0aW9uW107XG4gIG1hbmlwdWxhdG9ycz86IE1hbmlwdWxhdG9yT3B0aW9uW107XG4gIGV4dHJhcz86IHtcbiAgICBmaWVsZFRyYW5zZm9ybT86IGFueSxcbiAgICBzaG93RXJyb3I/OiAoZmllbGQ6IEZpZWxkKSA9PiBib29sZWFuO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBGb3JtQXJyYXkgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBGb3JtbHlGaWVsZENvbmZpZywgRm9ybWx5Rm9ybU9wdGlvbnMsIEZvcm1seVZhbHVlQ2hhbmdlRXZlbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2Zvcm1seS5maWVsZC5jb25maWcnO1xuaW1wb3J0IHsgZXZhbEV4cHJlc3Npb24sIEZPUk1MWV9WQUxJREFUT1JTLCBnZXRGaWVsZE1vZGVsLCBpc09iamVjdCwgZ2V0S2V5UGF0aCwgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICcuLi91dGlscyc7XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBGb3JtbHlGb3JtRXhwcmVzc2lvbiB7XG4gIGNoZWNrRmllbGRzKGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwgZmllbGRzOiBGb3JtbHlGaWVsZENvbmZpZ1tdID0gW10sIG1vZGVsOiBhbnksIG9wdGlvbnM6IEZvcm1seUZvcm1PcHRpb25zKSB7XG4gICAgdGhpcy5fY2hlY2tGaWVsZHMoZm9ybSwgZmllbGRzLCBtb2RlbCwgb3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIF9jaGVja0ZpZWxkcyhmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXksIGZpZWxkczogRm9ybWx5RmllbGRDb25maWdbXSA9IFtdLCBtb2RlbDogYW55LCBvcHRpb25zOiBGb3JtbHlGb3JtT3B0aW9ucykge1xuICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgIHRoaXMuY2hlY2tGaWVsZEV4cHJlc3Npb25DaGFuZ2UoZm9ybSwgZmllbGQsIHRoaXMuZ2V0UGFyZW50TW9kZWwobW9kZWwsIGZpZWxkKSwgb3B0aW9ucyk7XG4gICAgICB0aGlzLmNoZWNrRmllbGRWaXNpYmlsaXR5Q2hhbmdlKGZvcm0sIGZpZWxkLCB0aGlzLmdldFBhcmVudE1vZGVsKG1vZGVsLCBmaWVsZCksIG9wdGlvbnMpO1xuXG4gICAgICBpZiAoZmllbGQuZmllbGRHcm91cCAmJiBmaWVsZC5maWVsZEdyb3VwLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5fY2hlY2tGaWVsZHMoZmllbGQuZm9ybUNvbnRyb2wgPyA8Rm9ybUdyb3VwPiBmaWVsZC5mb3JtQ29udHJvbCA6IGZvcm0sIGZpZWxkLmZpZWxkR3JvdXAsIHRoaXMuZ2V0UGFyZW50TW9kZWwobW9kZWwsIGZpZWxkKSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrRmllbGRFeHByZXNzaW9uQ2hhbmdlKGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnLCBtb2RlbDogYW55LCBvcHRpb25zOiBGb3JtbHlGb3JtT3B0aW9ucykge1xuICAgIGlmICghZmllbGQgfHwgIWZpZWxkLmV4cHJlc3Npb25Qcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXhwcmVzc2lvblByb3BlcnRpZXMgPSBmaWVsZC5leHByZXNzaW9uUHJvcGVydGllcztcbiAgICBjb25zdCB2YWxpZGF0b3JzID0gRk9STUxZX1ZBTElEQVRPUlMubWFwKHYgPT4gYHRlbXBsYXRlT3B0aW9ucy4ke3Z9YCk7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBleHByZXNzaW9uUHJvcGVydGllcykge1xuICAgICAgY29uc3QgZXhwcmVzc2lvblZhbHVlID0gZXZhbEV4cHJlc3Npb24oXG4gICAgICAgIGV4cHJlc3Npb25Qcm9wZXJ0aWVzW2tleV0uZXhwcmVzc2lvbixcbiAgICAgICAgeyBmaWVsZCB9LFxuICAgICAgICBbbW9kZWwsIG9wdGlvbnMuZm9ybVN0YXRlXSxcbiAgICAgICk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgZXhwcmVzc2lvblByb3BlcnRpZXNba2V5XS5leHByZXNzaW9uVmFsdWUgIT09IGV4cHJlc3Npb25WYWx1ZVxuICAgICAgICAmJiAoIWlzT2JqZWN0KGV4cHJlc3Npb25WYWx1ZSkgfHwgSlNPTi5zdHJpbmdpZnkoZXhwcmVzc2lvblZhbHVlKSAhPT0gSlNPTi5zdHJpbmdpZnkoZXhwcmVzc2lvblByb3BlcnRpZXNba2V5XS5leHByZXNzaW9uVmFsdWUpKVxuICAgICAgKSB7XG4gICAgICAgIGV4cHJlc3Npb25Qcm9wZXJ0aWVzW2tleV0uZXhwcmVzc2lvblZhbHVlID0gZXhwcmVzc2lvblZhbHVlO1xuICAgICAgICBldmFsRXhwcmVzc2lvbihcbiAgICAgICAgICBleHByZXNzaW9uUHJvcGVydGllc1trZXldLmV4cHJlc3Npb25WYWx1ZVNldHRlcixcbiAgICAgICAgICB7IGZpZWxkIH0sXG4gICAgICAgICAgW2V4cHJlc3Npb25WYWx1ZSwgbW9kZWwsIGZpZWxkXSxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoa2V5LmluZGV4T2YoJ21vZGVsLicpID09PSAwKSB7XG4gICAgICAgICAgY29uc3QgcGF0aCA9IGtleS5yZXBsYWNlKC9ebW9kZWxcXC4vLCAnJyksXG4gICAgICAgICAgICBjb250cm9sID0gZmllbGQua2V5ICYmIGtleSA9PT0gcGF0aCA/IGZpZWxkLmZvcm1Db250cm9sIDogZm9ybS5nZXQocGF0aCk7XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb250cm9sXG4gICAgICAgICAgICAmJiAhKGlzTnVsbE9yVW5kZWZpbmVkKGNvbnRyb2wudmFsdWUpICYmIGlzTnVsbE9yVW5kZWZpbmVkKGV4cHJlc3Npb25WYWx1ZSkpXG4gICAgICAgICAgICAmJiBjb250cm9sLnZhbHVlICE9PSBleHByZXNzaW9uVmFsdWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnRyb2wucGF0Y2hWYWx1ZShleHByZXNzaW9uVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0b3JzLmluZGV4T2Yoa2V5KSAhPT0gLTEgJiYgZmllbGQuZm9ybUNvbnRyb2wpIHtcbiAgICAgICAgICBmaWVsZC5mb3JtQ29udHJvbC51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KHsgZW1pdEV2ZW50OiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tGaWVsZFZpc2liaWxpdHlDaGFuZ2UoZm9ybTogRm9ybUdyb3VwIHwgRm9ybUFycmF5LCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcsIG1vZGVsOiBhbnksIG9wdGlvbnM6IEZvcm1seUZvcm1PcHRpb25zKSB7XG4gICAgaWYgKCFmaWVsZCB8fCBpc051bGxPclVuZGVmaW5lZChmaWVsZC5oaWRlRXhwcmVzc2lvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBoaWRlRXhwcmVzc2lvblJlc3VsdDogYm9vbGVhbiA9ICEhZXZhbEV4cHJlc3Npb24oXG4gICAgICBmaWVsZC5oaWRlRXhwcmVzc2lvbixcbiAgICAgIHsgZmllbGQgfSxcbiAgICAgIFttb2RlbCwgb3B0aW9ucy5mb3JtU3RhdGVdLFxuICAgICk7XG5cbiAgICBpZiAoaGlkZUV4cHJlc3Npb25SZXN1bHQgIT09IGZpZWxkLmhpZGUpIHtcbiAgICAgIC8vIHRvZ2dsZSBoaWRlXG4gICAgICBmaWVsZC5oaWRlID0gaGlkZUV4cHJlc3Npb25SZXN1bHQ7XG4gICAgICBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMuaGlkZGVuID0gaGlkZUV4cHJlc3Npb25SZXN1bHQ7XG5cbiAgICAgIGlmIChmaWVsZC5mb3JtQ29udHJvbCAmJiBmaWVsZC5rZXkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5maWVsZFBhcmVudEZvcm1Db250cm9sKGZvcm0sIGZpZWxkKTtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBwYXJlbnQuZ2V0KGAke3RoaXMuZmllbGRLZXkoZmllbGQpfWApO1xuICAgICAgICAgIGlmIChoaWRlRXhwcmVzc2lvblJlc3VsdCA9PT0gdHJ1ZSAmJiBjb250cm9sKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZpZWxkQ29udHJvbChwYXJlbnQsIGZpZWxkKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGhpZGVFeHByZXNzaW9uUmVzdWx0ID09PSBmYWxzZSAmJiAhY29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5hZGRGaWVsZENvbnRyb2wocGFyZW50LCBmaWVsZCwgbW9kZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5maWVsZENoYW5nZXMpIHtcbiAgICAgICAgb3B0aW9ucy5maWVsZENoYW5nZXMubmV4dCg8Rm9ybWx5VmFsdWVDaGFuZ2VFdmVudD4geyBmaWVsZDogZmllbGQsIHR5cGU6ICdoaWRkZW4nLCB2YWx1ZTogaGlkZUV4cHJlc3Npb25SZXN1bHQgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRGaWVsZENvbnRyb2wocGFyZW50OiBGb3JtQXJyYXkgfCBGb3JtR3JvdXAsIGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZywgbW9kZWw6IGFueSkge1xuICAgIGNvbnN0IGZpZWxkTW9kZWwgPSB0aGlzLmdldEZpZWxkTW9kZWwobW9kZWwsIGZpZWxkKTtcblxuICAgIGlmIChcbiAgICAgICEoaXNOdWxsT3JVbmRlZmluZWQoZmllbGQuZm9ybUNvbnRyb2wudmFsdWUpICYmIGlzTnVsbE9yVW5kZWZpbmVkKGZpZWxkTW9kZWwpKVxuICAgICAgJiYgZmllbGQuZm9ybUNvbnRyb2wudmFsdWUgIT09IGZpZWxkTW9kZWxcbiAgICApIHtcbiAgICAgIGZpZWxkLmZvcm1Db250cm9sLnBhdGNoVmFsdWUoZmllbGRNb2RlbCwgeyBlbWl0RXZlbnQ6IGZhbHNlIH0pO1xuICAgIH1cblxuICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBGb3JtQXJyYXkpIHtcbiAgICAgIHBhcmVudC5wdXNoKGZpZWxkLmZvcm1Db250cm9sKTtcbiAgICB9IGVsc2UgaWYgKHBhcmVudCBpbnN0YW5jZW9mIEZvcm1Hcm91cCkge1xuICAgICAgcGFyZW50LmFkZENvbnRyb2woYCR7dGhpcy5maWVsZEtleShmaWVsZCl9YCwgZmllbGQuZm9ybUNvbnRyb2wpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0RmllbGRNb2RlbChtb2RlbDogYW55LCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBpZiAoZmllbGQuZmllbGRHcm91cCB8fCBmaWVsZC5maWVsZEFycmF5KSB7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldEZpZWxkTW9kZWwobW9kZWwsIGZpZWxkLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIGdldFBhcmVudE1vZGVsKG1vZGVsOiBhbnksIGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICAgIGlmIChmaWVsZC5rZXkgJiYgKGZpZWxkLmZpZWxkR3JvdXAgfHwgZmllbGQuZmllbGRBcnJheSkpIHtcbiAgICAgIHJldHVybiBnZXRGaWVsZE1vZGVsKG1vZGVsLCBmaWVsZCwgdHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbDtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlRmllbGRDb250cm9sKHBhcmVudDogRm9ybUFycmF5IHwgRm9ybUdyb3VwLCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgRm9ybUFycmF5KSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQXQodGhpcy5maWVsZEtleShmaWVsZCkgYXMgbnVtYmVyKTtcbiAgICB9IGVsc2UgaWYgKHBhcmVudCBpbnN0YW5jZW9mIEZvcm1Hcm91cCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNvbnRyb2woYCR7dGhpcy5maWVsZEtleShmaWVsZCl9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmaWVsZFBhcmVudEZvcm1Db250cm9sKGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKTogRm9ybUFycmF5IHwgRm9ybUdyb3VwIHtcbiAgICBjb25zdCBwYXRocyA9IGdldEtleVBhdGgoZmllbGQpO1xuICAgIHBhdGhzLnBvcCgpOyAvLyByZW1vdmUgbGFzdCBwYXRoXG5cbiAgICByZXR1cm4gKHBhdGhzLmxlbmd0aCA+IDAgPyBmb3JtLmdldChwYXRocykgOiBmb3JtKSBhcyBhbnk7XG4gIH1cblxuICBwcml2YXRlIGZpZWxkS2V5KGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICAgIHJldHVybiBnZXRLZXlQYXRoKGZpZWxkKS5wb3AoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBGb3JtQXJyYXksIEZvcm1Db250cm9sLCBBYnN0cmFjdENvbnRyb2wsIFZhbGlkYXRvcnMsIEFic3RyYWN0Q29udHJvbE9wdGlvbnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBGb3JtbHlDb25maWcsIEZpZWxkVmFsaWRhdG9yRm4sIFRlbXBsYXRlTWFuaXB1bGF0b3JzIH0gZnJvbSAnLi9mb3JtbHkuY29uZmlnJztcbmltcG9ydCB7IEZPUk1MWV9WQUxJREFUT1JTLCBldmFsU3RyaW5nRXhwcmVzc2lvbiwgZXZhbEV4cHJlc3Npb25WYWx1ZVNldHRlciwgZ2V0RmllbGRJZCwgaXNPYmplY3QsIGlzTnVsbE9yVW5kZWZpbmVkLCBjbG9uZSwgYXNzaWduTW9kZWxUb0ZpZWxkcyB9IGZyb20gJy4vLi4vdXRpbHMnO1xuaW1wb3J0IHsgRm9ybWx5RmllbGRDb25maWcsIEZvcm1seUZvcm1PcHRpb25zIH0gZnJvbSAnLi4vY29tcG9uZW50cy9mb3JtbHkuZmllbGQuY29uZmlnJztcbmltcG9ydCB7IGdldEtleVBhdGgsIGlzRnVuY3Rpb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBGb3JtbHlGb3JtRXhwcmVzc2lvbiB9IGZyb20gJy4vZm9ybWx5LmZvcm0uZXhwcmVzc2lvbic7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBGb3JtbHlGb3JtQnVpbGRlciB7XG4gIHByaXZhdGUgZm9ybUlkID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGZvcm1seUNvbmZpZzogRm9ybWx5Q29uZmlnLFxuICAgIHByaXZhdGUgZm9ybWx5Rm9ybUV4cHJlc3Npb246IEZvcm1seUZvcm1FeHByZXNzaW9uLFxuICApIHt9XG5cbiAgYnVpbGRGb3JtKGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwgZmllbGRzOiBGb3JtbHlGaWVsZENvbmZpZ1tdID0gW10sIG1vZGVsOiBhbnksIG9wdGlvbnM6IEZvcm1seUZvcm1PcHRpb25zKSB7XG4gICAgbGV0IGZpZWxkVHJhbnNmb3JtcyA9IChvcHRpb25zICYmIG9wdGlvbnMuZmllbGRUcmFuc2Zvcm0pIHx8IHRoaXMuZm9ybWx5Q29uZmlnLmV4dHJhcy5maWVsZFRyYW5zZm9ybTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmllbGRUcmFuc2Zvcm1zKSkge1xuICAgICAgZmllbGRUcmFuc2Zvcm1zID0gW2ZpZWxkVHJhbnNmb3Jtc107XG4gICAgfVxuXG4gICAgZmllbGRUcmFuc2Zvcm1zLmZvckVhY2goZmllbGRUcmFuc2Zvcm0gPT4ge1xuICAgICAgaWYgKGZpZWxkVHJhbnNmb3JtKSB7XG4gICAgICAgIGZpZWxkcyA9IGZpZWxkVHJhbnNmb3JtKGZpZWxkcywgbW9kZWwsIGZvcm0sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIWZpZWxkcykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZmllbGRUcmFuc2Zvcm0gbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgZmllbGRzJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGFzc2lnbk1vZGVsVG9GaWVsZHMoZmllbGRzLCBtb2RlbCk7XG4gICAgdGhpcy5fYnVpbGRGb3JtKGZvcm0sIGZpZWxkcywgb3B0aW9ucyk7XG4gICAgdGhpcy5mb3JtbHlGb3JtRXhwcmVzc2lvbi5jaGVja0ZpZWxkcyhmb3JtLCBmaWVsZHMsIG1vZGVsLCBvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgX2J1aWxkRm9ybShmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXksIGZpZWxkczogRm9ybWx5RmllbGRDb25maWdbXSA9IFtdLCBvcHRpb25zOiBGb3JtbHlGb3JtT3B0aW9ucykge1xuICAgIHRoaXMuZm9ybUlkKys7XG4gICAgdGhpcy5yZWdpc3RlckZvcm1Db250cm9scyhmb3JtLCBmaWVsZHMsIG9wdGlvbnMpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlckZvcm1Db250cm9scyhmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXksIGZpZWxkczogRm9ybWx5RmllbGRDb25maWdbXSwgb3B0aW9uczogRm9ybWx5Rm9ybU9wdGlvbnMpIHtcbiAgICBmaWVsZHMuZm9yRWFjaCgoZmllbGQsIGluZGV4KSA9PiB7XG4gICAgICBmaWVsZC5pZCA9IGdldEZpZWxkSWQoYGZvcm1seV8ke3RoaXMuZm9ybUlkfWAsIGZpZWxkLCBpbmRleCk7XG4gICAgICB0aGlzLmluaXRGaWVsZE9wdGlvbnMoZmllbGQpO1xuICAgICAgdGhpcy5pbml0RmllbGRFeHByZXNzaW9uKGZpZWxkLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuaW5pdEZpZWxkVmFsaWRhdGlvbihmaWVsZCk7XG4gICAgICB0aGlzLmluaXRGaWVsZFdyYXBwZXJzKGZpZWxkKTtcbiAgICAgIHRoaXMuaW5pdEZpZWxkQXN5bmNWYWxpZGF0aW9uKGZpZWxkKTtcblxuICAgICAgaWYgKGZpZWxkLmtleSAmJiBmaWVsZC50eXBlKSB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gZ2V0S2V5UGF0aCh7IGtleTogZmllbGQua2V5IH0pO1xuICAgICAgICBsZXQgcm9vdEZvcm0gPSBmb3JtLCByb290TW9kZWwgPSBmaWVsZC5tb2RlbDtcbiAgICAgICAgcGF0aHMuZm9yRWFjaCgocGF0aCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBGb3JtR3JvdXAvRm9ybUFycmF5IG9ubHkgYWxsb3cgc3RyaW5nIHZhbHVlIGZvciBwYXRoXG4gICAgICAgICAgY29uc3QgZm9ybVBhdGggPSBwYXRoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgLy8gaXMgbGFzdCBpdGVtXG4gICAgICAgICAgaWYgKGluZGV4ID09PSBwYXRocy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEZvcm1Db250cm9sKHJvb3RGb3JtLCBmaWVsZCwgcm9vdE1vZGVsLCBmb3JtUGF0aCk7XG4gICAgICAgICAgICBpZiAoZmllbGQuZmllbGRBcnJheSkge1xuICAgICAgICAgICAgICBmaWVsZC5maWVsZEdyb3VwID0gW107XG4gICAgICAgICAgICAgIGZpZWxkLm1vZGVsLmZvckVhY2goKG06IGFueSwgaTogbnVtYmVyKSA9PiBmaWVsZC5maWVsZEdyb3VwLnB1c2goXG4gICAgICAgICAgICAgICAgeyAuLi5jbG9uZShmaWVsZC5maWVsZEFycmF5KSwga2V5OiBgJHtpfWAgfSxcbiAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgIGFzc2lnbk1vZGVsVG9GaWVsZHMoZmllbGQuZmllbGRHcm91cCwgcm9vdE1vZGVsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkRm9ybSA9IHJvb3RGb3JtLmdldChmb3JtUGF0aCkgYXMgRm9ybUdyb3VwO1xuICAgICAgICAgICAgaWYgKCFuZXN0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgIG5lc3RlZEZvcm0gPSBuZXcgRm9ybUdyb3VwKHt9KTtcbiAgICAgICAgICAgICAgdGhpcy5hZGRDb250cm9sKHJvb3RGb3JtLCBmb3JtUGF0aCwgbmVzdGVkRm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJvb3RNb2RlbFtwYXRoXSkge1xuICAgICAgICAgICAgICByb290TW9kZWxbcGF0aF0gPSB0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycgPyB7fSA6IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByb290Rm9ybSA9IG5lc3RlZEZvcm07XG4gICAgICAgICAgICByb290TW9kZWwgPSByb290TW9kZWxbcGF0aF07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpZWxkLmZpZWxkR3JvdXApIHtcbiAgICAgICAgaWYgKCFmaWVsZC50eXBlKSB7XG4gICAgICAgICAgZmllbGQudHlwZSA9ICdmb3JtbHktZ3JvdXAnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgYGhpZGVFeHByZXNzaW9uYCBpcyBzZXQgaW4gdGhhdCBjYXNlIHdlIGhhdmUgdG8gZGVhbFxuICAgICAgICAvLyB3aXRoIHRvZ2dsZSBGb3JtQ29udHJvbCBmb3IgZWFjaCBmaWVsZCBpbiBmaWVsZEdyb3VwIHNlcGFyYXRlbHlcbiAgICAgICAgaWYgKGZpZWxkLmhpZGVFeHByZXNzaW9uKSB7XG4gICAgICAgICAgZmllbGQuZmllbGRHcm91cC5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgbGV0IGhpZGVFeHByZXNzaW9uOiBhbnkgPSBmLmhpZGVFeHByZXNzaW9uIHx8ICgoKSA9PiBmYWxzZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGhpZGVFeHByZXNzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBoaWRlRXhwcmVzc2lvbiA9IGV2YWxTdHJpbmdFeHByZXNzaW9uKGhpZGVFeHByZXNzaW9uLCBbJ21vZGVsJywgJ2Zvcm1TdGF0ZSddKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZi5oaWRlRXhwcmVzc2lvbiA9IChtb2RlbCwgZm9ybVN0YXRlKSA9PiBmaWVsZC5oaWRlIHx8IGhpZGVFeHByZXNzaW9uKG1vZGVsLCBmb3JtU3RhdGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkLmtleSkge1xuICAgICAgICAgIHRoaXMuYWRkRm9ybUNvbnRyb2woZm9ybSwgZmllbGQsIHsgW2ZpZWxkLmtleV06IGZpZWxkLmZpZWxkQXJyYXkgPyBbXSA6IHt9IH0sIGZpZWxkLmtleSk7XG4gICAgICAgICAgdGhpcy5fYnVpbGRGb3JtKGZpZWxkLmZvcm1Db250cm9sIGFzIEZvcm1Hcm91cCwgZmllbGQuZmllbGRHcm91cCwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fYnVpbGRGb3JtKGZvcm0sIGZpZWxkLmZpZWxkR3JvdXAsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGluaXRGaWVsZEV4cHJlc3Npb24oZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnLCBvcHRpb25zOiBGb3JtbHlGb3JtT3B0aW9ucykge1xuICAgIGlmIChmaWVsZC5leHByZXNzaW9uUHJvcGVydGllcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZmllbGQuZXhwcmVzc2lvblByb3BlcnRpZXMgYXMgYW55KSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGQuZXhwcmVzc2lvblByb3BlcnRpZXNba2V5XSA9PT0gJ3N0cmluZycgfHwgaXNGdW5jdGlvbihmaWVsZC5leHByZXNzaW9uUHJvcGVydGllc1trZXldKSkge1xuICAgICAgICAgIC8vIGNhY2hlIGJ1aWx0IGV4cHJlc3Npb25cbiAgICAgICAgICBmaWVsZC5leHByZXNzaW9uUHJvcGVydGllc1trZXldID0ge1xuICAgICAgICAgICAgZXhwcmVzc2lvbjogaXNGdW5jdGlvbihmaWVsZC5leHByZXNzaW9uUHJvcGVydGllc1trZXldKSA/IGZpZWxkLmV4cHJlc3Npb25Qcm9wZXJ0aWVzW2tleV0gOiBldmFsU3RyaW5nRXhwcmVzc2lvbihmaWVsZC5leHByZXNzaW9uUHJvcGVydGllc1trZXldLCBbJ21vZGVsJywgJ2Zvcm1TdGF0ZSddKSxcbiAgICAgICAgICAgIGV4cHJlc3Npb25WYWx1ZVNldHRlcjogZXZhbEV4cHJlc3Npb25WYWx1ZVNldHRlcihcbiAgICAgICAgICAgICAgYGZpZWxkLiR7a2V5fWAsXG4gICAgICAgICAgICAgIFsnZXhwcmVzc2lvblZhbHVlJywgJ21vZGVsJywgJ2ZpZWxkJ10sXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmllbGQuaGlkZUV4cHJlc3Npb24pIHtcbiAgICAgIC8vIGRlbGV0ZSBoaWRlIHZhbHVlIGluIG9yZGVyIHRvIGZvcmNlIHJlLWV2YWx1YXRlIGl0IGluIEZvcm1seUZvcm1FeHByZXNzaW9uLlxuICAgICAgZGVsZXRlIGZpZWxkLmhpZGU7XG4gICAgICBpZiAodHlwZW9mIGZpZWxkLmhpZGVFeHByZXNzaW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBjYWNoZSBidWlsdCBleHByZXNzaW9uXG4gICAgICAgIGZpZWxkLmhpZGVFeHByZXNzaW9uID0gZXZhbFN0cmluZ0V4cHJlc3Npb24oZmllbGQuaGlkZUV4cHJlc3Npb24sIFsnbW9kZWwnLCAnZm9ybVN0YXRlJ10pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdEZpZWxkT3B0aW9ucyhmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMgPSBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMgfHwge307XG4gICAgaWYgKGZpZWxkLnR5cGUpIHtcbiAgICAgIHRoaXMuZm9ybWx5Q29uZmlnLmdldE1lcmdlZEZpZWxkKGZpZWxkKTtcbiAgICAgIGlmIChmaWVsZC5rZXkpIHtcbiAgICAgICAgZmllbGQudGVtcGxhdGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICBmb2N1czogZmFsc2UsXG4gICAgICAgIH0sIGZpZWxkLnRlbXBsYXRlT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0RmllbGRBc3luY1ZhbGlkYXRpb24oZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnKSB7XG4gICAgY29uc3QgdmFsaWRhdG9yczogYW55ID0gW107XG4gICAgaWYgKGZpZWxkLmFzeW5jVmFsaWRhdG9ycykge1xuICAgICAgZm9yIChjb25zdCB2YWxpZGF0b3JOYW1lIGluIGZpZWxkLmFzeW5jVmFsaWRhdG9ycykge1xuICAgICAgICBpZiAodmFsaWRhdG9yTmFtZSAhPT0gJ3ZhbGlkYXRpb24nKSB7XG4gICAgICAgICAgbGV0IHZhbGlkYXRvciA9IGZpZWxkLmFzeW5jVmFsaWRhdG9yc1t2YWxpZGF0b3JOYW1lXTtcbiAgICAgICAgICBpZiAoaXNPYmplY3QodmFsaWRhdG9yKSkge1xuICAgICAgICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdG9yLmV4cHJlc3Npb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFsaWRhdG9ycy5wdXNoKChjb250cm9sOiBGb3JtQ29udHJvbCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0b3IoY29udHJvbCwgZmllbGQpLnRoZW4oKHJlc3VsdDogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCA/IG51bGwgOiB7IFt2YWxpZGF0b3JOYW1lXTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmaWVsZC5hc3luY1ZhbGlkYXRvcnMgJiYgQXJyYXkuaXNBcnJheShmaWVsZC5hc3luY1ZhbGlkYXRvcnMudmFsaWRhdGlvbikpIHtcbiAgICAgIGZpZWxkLmFzeW5jVmFsaWRhdG9ycy52YWxpZGF0aW9uXG4gICAgICAgIC5mb3JFYWNoKCh2YWxpZGF0b3I6IGFueSkgPT4gdmFsaWRhdG9ycy5wdXNoKHRoaXMud3JhcE5nVmFsaWRhdG9yRm4oZmllbGQsIHZhbGlkYXRvcikpKTtcbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdG9ycy5sZW5ndGgpIHtcbiAgICAgIGlmIChmaWVsZC5hc3luY1ZhbGlkYXRvcnMgJiYgIUFycmF5LmlzQXJyYXkoZmllbGQuYXN5bmNWYWxpZGF0b3JzLnZhbGlkYXRpb24pKSB7XG4gICAgICAgIGZpZWxkLmFzeW5jVmFsaWRhdG9ycy52YWxpZGF0aW9uID0gVmFsaWRhdG9ycy5jb21wb3NlQXN5bmMoW2ZpZWxkLmFzeW5jVmFsaWRhdG9ycy52YWxpZGF0aW9uLCAuLi52YWxpZGF0b3JzXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZC5hc3luY1ZhbGlkYXRvcnMgPSB7XG4gICAgICAgICAgdmFsaWRhdGlvbjogVmFsaWRhdG9ycy5jb21wb3NlQXN5bmModmFsaWRhdG9ycyksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0RmllbGRWYWxpZGF0aW9uKGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZykge1xuICAgIGNvbnN0IHZhbGlkYXRvcnM6IGFueSA9IFtdO1xuICAgIEZPUk1MWV9WQUxJREFUT1JTXG4gICAgICAuZmlsdGVyKG9wdCA9PiAoZmllbGQudGVtcGxhdGVPcHRpb25zICYmIGZpZWxkLnRlbXBsYXRlT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHQpKVxuICAgICAgICB8fCAoZmllbGQuZXhwcmVzc2lvblByb3BlcnRpZXMgJiYgZmllbGQuZXhwcmVzc2lvblByb3BlcnRpZXNbYHRlbXBsYXRlT3B0aW9ucy4ke29wdH1gXSksXG4gICAgICApXG4gICAgICAuZm9yRWFjaCgob3B0KSA9PiB7XG4gICAgICAgIHZhbGlkYXRvcnMucHVzaCgoY29udHJvbDogRm9ybUNvbnRyb2wpID0+IHtcbiAgICAgICAgICBpZiAoZmllbGQudGVtcGxhdGVPcHRpb25zW29wdF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWxpZGF0aW9uKG9wdCwgZmllbGQudGVtcGxhdGVPcHRpb25zW29wdF0pKGNvbnRyb2wpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGZpZWxkLnZhbGlkYXRvcnMpIHtcbiAgICAgIGZvciAoY29uc3QgdmFsaWRhdG9yTmFtZSBpbiBmaWVsZC52YWxpZGF0b3JzKSB7XG4gICAgICAgIGlmICh2YWxpZGF0b3JOYW1lICE9PSAndmFsaWRhdGlvbicpIHtcbiAgICAgICAgICBsZXQgdmFsaWRhdG9yID0gZmllbGQudmFsaWRhdG9yc1t2YWxpZGF0b3JOYW1lXTtcbiAgICAgICAgICBpZiAoaXNPYmplY3QodmFsaWRhdG9yKSkge1xuICAgICAgICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdG9yLmV4cHJlc3Npb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFsaWRhdG9ycy5wdXNoKChjb250cm9sOiBGb3JtQ29udHJvbCkgPT4gdmFsaWRhdG9yKGNvbnRyb2wsIGZpZWxkKSA/IG51bGwgOiB7IFt2YWxpZGF0b3JOYW1lXTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmaWVsZC52YWxpZGF0b3JzICYmIEFycmF5LmlzQXJyYXkoZmllbGQudmFsaWRhdG9ycy52YWxpZGF0aW9uKSkge1xuICAgICAgZmllbGQudmFsaWRhdG9ycy52YWxpZGF0aW9uXG4gICAgICAgIC5mb3JFYWNoKCh2YWxpZGF0b3I6IGFueSkgPT4gdmFsaWRhdG9ycy5wdXNoKHRoaXMud3JhcE5nVmFsaWRhdG9yRm4oZmllbGQsIHZhbGlkYXRvcikpKTtcbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdG9ycy5sZW5ndGgpIHtcbiAgICAgIGlmIChmaWVsZC52YWxpZGF0b3JzICYmICFBcnJheS5pc0FycmF5KGZpZWxkLnZhbGlkYXRvcnMudmFsaWRhdGlvbikpIHtcbiAgICAgICAgZmllbGQudmFsaWRhdG9ycy52YWxpZGF0aW9uID0gVmFsaWRhdG9ycy5jb21wb3NlKFtmaWVsZC52YWxpZGF0b3JzLnZhbGlkYXRpb24sIC4uLnZhbGlkYXRvcnNdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpZWxkLnZhbGlkYXRvcnMgPSB7XG4gICAgICAgICAgdmFsaWRhdGlvbjogVmFsaWRhdG9ycy5jb21wb3NlKHZhbGlkYXRvcnMpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkRm9ybUNvbnRyb2woZm9ybTogRm9ybUdyb3VwIHwgRm9ybUFycmF5LCBmaWVsZDogRm9ybWx5RmllbGRDb25maWcsIG1vZGVsOiBhbnksIHBhdGg6IHN0cmluZykge1xuICAgIGxldCBjb250cm9sOiBBYnN0cmFjdENvbnRyb2w7XG4gICAgY29uc3QgdmFsaWRhdG9ycyA9IGZpZWxkLnZhbGlkYXRvcnMgPyBmaWVsZC52YWxpZGF0b3JzLnZhbGlkYXRpb24gOiB1bmRlZmluZWQsXG4gICAgICBhc3luY1ZhbGlkYXRvcnMgPSBmaWVsZC5hc3luY1ZhbGlkYXRvcnMgPyBmaWVsZC5hc3luY1ZhbGlkYXRvcnMudmFsaWRhdGlvbiA6IHVuZGVmaW5lZCxcbiAgICAgIHVwZGF0ZU9uID0gZmllbGQubW9kZWxPcHRpb25zICYmIGZpZWxkLm1vZGVsT3B0aW9ucy51cGRhdGVPbiA/XG4gICAgICAgIGZpZWxkLm1vZGVsT3B0aW9ucy51cGRhdGVPbiA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBhYnN0cmFjdENvbnRyb2xPcHRpb25zID0ge1xuICAgICAgdmFsaWRhdG9ycyxcbiAgICAgIGFzeW5jVmFsaWRhdG9ycyxcbiAgICAgIHVwZGF0ZU9uLFxuICAgIH0gYXMgQWJzdHJhY3RDb250cm9sT3B0aW9ucztcblxuICAgIGlmIChmaWVsZC5mb3JtQ29udHJvbCBpbnN0YW5jZW9mIEFic3RyYWN0Q29udHJvbCB8fCBmb3JtLmdldChwYXRoKSkge1xuICAgICAgY29udHJvbCA9IGZpZWxkLmZvcm1Db250cm9sIHx8IGZvcm0uZ2V0KHBhdGgpO1xuICAgICAgaWYgKFxuICAgICAgICAhKGlzTnVsbE9yVW5kZWZpbmVkKGNvbnRyb2wudmFsdWUpICYmIGlzTnVsbE9yVW5kZWZpbmVkKG1vZGVsW3BhdGhdKSlcbiAgICAgICAgJiYgY29udHJvbC52YWx1ZSAhPT0gbW9kZWxbcGF0aF1cbiAgICAgICAgJiYgY29udHJvbCBpbnN0YW5jZW9mIEZvcm1Db250cm9sXG4gICAgICApIHtcbiAgICAgICAgY29udHJvbC5wYXRjaFZhbHVlKG1vZGVsW3BhdGhdKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZpZWxkLmNvbXBvbmVudCAmJiBmaWVsZC5jb21wb25lbnQuY3JlYXRlQ29udHJvbCkge1xuICAgICAgY29udHJvbCA9IGZpZWxkLmNvbXBvbmVudC5jcmVhdGVDb250cm9sKG1vZGVsW3BhdGhdLCBmaWVsZCk7XG4gICAgfSBlbHNlIGlmIChmaWVsZC5maWVsZEdyb3VwICYmIGZpZWxkLmtleSAmJiBmaWVsZC5rZXkgPT09IHBhdGggJiYgIWZpZWxkLmZpZWxkQXJyYXkpIHtcbiAgICAgIGNvbnRyb2wgPSBuZXcgRm9ybUdyb3VwKG1vZGVsW3BhdGhdLCBhYnN0cmFjdENvbnRyb2xPcHRpb25zKTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkLmZpZWxkQXJyYXkgJiYgZmllbGQua2V5ICYmIGZpZWxkLmtleSA9PT0gcGF0aCkge1xuICAgICAgY29udHJvbCA9IG5ldyBGb3JtQXJyYXkoW10sIGFic3RyYWN0Q29udHJvbE9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250cm9sID0gbmV3IEZvcm1Db250cm9sKG1vZGVsW3BhdGhdLCBhYnN0cmFjdENvbnRyb2xPcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGQudGVtcGxhdGVPcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICBjb250cm9sLmRpc2FibGUoKTtcbiAgICB9XG5cbiAgICAvLyBSZXBsYWNlIGRlY29yYXRlZCBwcm9wZXJ0eSB3aXRoIGEgZ2V0dGVyIHRoYXQgcmV0dXJucyB0aGUgb2JzZXJ2YWJsZS5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci1yZWR1eC9zdG9yZS9ibG9iL21hc3Rlci9zcmMvZGVjb3JhdG9ycy9zZWxlY3QudHMjTDc5LUw4NVxuICAgIGlmIChkZWxldGUgZmllbGQudGVtcGxhdGVPcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmllbGQudGVtcGxhdGVPcHRpb25zLCAnZGlzYWJsZWQnLCB7XG4gICAgICAgIGdldDogKGZ1bmN0aW9uICgpIHsgcmV0dXJuICF0aGlzLmZvcm1Db250cm9sLmVuYWJsZWQ7IH0pLmJpbmQoZmllbGQpLFxuICAgICAgICBzZXQ6IChmdW5jdGlvbiAodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgICBpZiAodGhpcy5leHByZXNzaW9uUHJvcGVydGllcyAmJiB0aGlzLmV4cHJlc3Npb25Qcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KCd0ZW1wbGF0ZU9wdGlvbnMuZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uUHJvcGVydGllc1sndGVtcGxhdGVPcHRpb25zLmRpc2FibGVkJ10uZXhwcmVzc2lvblZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFsdWUgPyB0aGlzLmZvcm1Db250cm9sLmRpc2FibGUoKSA6IHRoaXMuZm9ybUNvbnRyb2wuZW5hYmxlKCk7XG4gICAgICAgIH0pLmJpbmQoZmllbGQpLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENvbnRyb2woZm9ybSwgcGF0aCwgY29udHJvbCwgZmllbGQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRDb250cm9sKGZvcm06IEZvcm1Hcm91cCB8IEZvcm1BcnJheSwga2V5OiBzdHJpbmcgfCBudW1iZXIsIGZvcm1Db250cm9sOiBBYnN0cmFjdENvbnRyb2wsIGZpZWxkPzogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBpZiAoZmllbGQpIHtcbiAgICAgIGZpZWxkLmZvcm1Db250cm9sID0gZm9ybUNvbnRyb2w7XG4gICAgfVxuXG4gICAgaWYgKGZvcm0gaW5zdGFuY2VvZiBGb3JtQXJyYXkpIHtcbiAgICAgIGlmIChmb3JtLmF0KDxudW1iZXI+IGtleSkgIT09IGZvcm1Db250cm9sKSB7XG4gICAgICAgIGZvcm0uc2V0Q29udHJvbCg8bnVtYmVyPmtleSwgZm9ybUNvbnRyb2wpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZm9ybS5nZXQoPHN0cmluZz4ga2V5KSAhPT0gZm9ybUNvbnRyb2wpIHtcbiAgICAgICAgZm9ybS5zZXRDb250cm9sKDxzdHJpbmc+a2V5LCBmb3JtQ29udHJvbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRWYWxpZGF0aW9uKG9wdDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgc3dpdGNoIChvcHQpIHtcbiAgICAgIGNhc2UgJ3JlcXVpcmVkJzpcbiAgICAgICAgcmV0dXJuIFZhbGlkYXRvcnMucmVxdWlyZWQ7XG4gICAgICBjYXNlICdwYXR0ZXJuJzpcbiAgICAgICAgcmV0dXJuIFZhbGlkYXRvcnMucGF0dGVybih2YWx1ZSk7XG4gICAgICBjYXNlICdtaW5MZW5ndGgnOlxuICAgICAgICByZXR1cm4gVmFsaWRhdG9ycy5taW5MZW5ndGgodmFsdWUpO1xuICAgICAgY2FzZSAnbWF4TGVuZ3RoJzpcbiAgICAgICAgcmV0dXJuIFZhbGlkYXRvcnMubWF4TGVuZ3RoKHZhbHVlKTtcbiAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgIHJldHVybiBWYWxpZGF0b3JzLm1pbih2YWx1ZSk7XG4gICAgICBjYXNlICdtYXgnOlxuICAgICAgICByZXR1cm4gVmFsaWRhdG9ycy5tYXgodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgd3JhcE5nVmFsaWRhdG9yRm4oZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnLCB2YWxpZGF0b3I6IHN0cmluZyB8IEZpZWxkVmFsaWRhdG9yRm4pIHtcbiAgICB2YWxpZGF0b3IgPSB0eXBlb2YgdmFsaWRhdG9yID09PSAnc3RyaW5nJ1xuICAgID8gdGhpcy5mb3JtbHlDb25maWcuZ2V0VmFsaWRhdG9yKHZhbGlkYXRvcikudmFsaWRhdGlvblxuICAgIDogdmFsaWRhdG9yO1xuXG4gICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpID0+ICh2YWxpZGF0b3IgYXMgRmllbGRWYWxpZGF0b3JGbikoY29udHJvbCwgZmllbGQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0RmllbGRXcmFwcGVycyhmaWVsZDogRm9ybWx5RmllbGRDb25maWcpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZU1hbmlwdWxhdG9yczogVGVtcGxhdGVNYW5pcHVsYXRvcnMgPSB7XG4gICAgICBwcmVXcmFwcGVyOiBbXSxcbiAgICAgIHBvc3RXcmFwcGVyOiBbXSxcbiAgICB9O1xuXG4gICAgaWYgKGZpZWxkLnRlbXBsYXRlT3B0aW9ucykge1xuICAgICAgdGhpcy5tZXJnZVRlbXBsYXRlTWFuaXB1bGF0b3JzKHRlbXBsYXRlTWFuaXB1bGF0b3JzLCBmaWVsZC50ZW1wbGF0ZU9wdGlvbnMudGVtcGxhdGVNYW5pcHVsYXRvcnMpO1xuICAgIH1cblxuICAgIHRoaXMubWVyZ2VUZW1wbGF0ZU1hbmlwdWxhdG9ycyh0ZW1wbGF0ZU1hbmlwdWxhdG9ycywgdGhpcy5mb3JtbHlDb25maWcudGVtcGxhdGVNYW5pcHVsYXRvcnMpO1xuXG4gICAgY29uc3QgcHJlV3JhcHBlcnMgPSB0ZW1wbGF0ZU1hbmlwdWxhdG9ycy5wcmVXcmFwcGVyLm1hcChtID0+IG0oZmllbGQpKS5maWx0ZXIodHlwZSA9PiB0eXBlKSxcbiAgICAgIHBvc3RXcmFwcGVycyA9IHRlbXBsYXRlTWFuaXB1bGF0b3JzLnBvc3RXcmFwcGVyLm1hcChtID0+IG0oZmllbGQpKS5maWx0ZXIodHlwZSA9PiB0eXBlKTtcblxuICAgIGlmICghZmllbGQud3JhcHBlcnMpIHtcbiAgICAgIGZpZWxkLndyYXBwZXJzID0gW107XG4gICAgfVxuXG4gICAgZmllbGQud3JhcHBlcnMgPSBbLi4ucHJlV3JhcHBlcnMsIC4uLihmaWVsZC53cmFwcGVycyB8fCBbXSksIC4uLnBvc3RXcmFwcGVyc107XG4gIH1cblxuICBwcml2YXRlIG1lcmdlVGVtcGxhdGVNYW5pcHVsYXRvcnMoc291cmNlOiBUZW1wbGF0ZU1hbmlwdWxhdG9ycywgdGFyZ2V0OiBUZW1wbGF0ZU1hbmlwdWxhdG9ycykge1xuICAgIHRhcmdldCA9IHRhcmdldCB8fCB7fTtcbiAgICBpZiAodGFyZ2V0LnByZVdyYXBwZXIpIHtcbiAgICAgIHNvdXJjZS5wcmVXcmFwcGVyID0gc291cmNlLnByZVdyYXBwZXIuY29uY2F0KHRhcmdldC5wcmVXcmFwcGVyKTtcbiAgICB9XG4gICAgaWYgKHRhcmdldC5wb3N0V3JhcHBlcikge1xuICAgICAgc291cmNlLnBvc3RXcmFwcGVyID0gc291cmNlLnBvc3RXcmFwcGVyLmNvbmNhdCh0YXJnZXQucG9zdFdyYXBwZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgRG9DaGVjaywgT25DaGFuZ2VzLCBJbnB1dCwgU2ltcGxlQ2hhbmdlcywgT3B0aW9uYWwsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBTa2lwU2VsZiwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEZvcm1BcnJheSwgTmdGb3JtLCBGb3JtR3JvdXBEaXJlY3RpdmUsIEZvcm1Db250cm9sLCBBYnN0cmFjdENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBGb3JtbHlGaWVsZENvbmZpZywgRm9ybWx5Rm9ybU9wdGlvbnMsIEZvcm1seVZhbHVlQ2hhbmdlRXZlbnQgfSBmcm9tICcuL2Zvcm1seS5maWVsZC5jb25maWcnO1xuaW1wb3J0IHsgRm9ybWx5Rm9ybUJ1aWxkZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9mb3JtbHkuZm9ybS5idWlsZGVyJztcbmltcG9ydCB7IEZvcm1seUZvcm1FeHByZXNzaW9uIH0gZnJvbSAnLi4vc2VydmljZXMvZm9ybWx5LmZvcm0uZXhwcmVzc2lvbic7XG5pbXBvcnQgeyBGb3JtbHlDb25maWcgfSBmcm9tICcuLi9zZXJ2aWNlcy9mb3JtbHkuY29uZmlnJztcbmltcG9ydCB7IGFzc2lnbk1vZGVsVmFsdWUsIGlzTnVsbE9yVW5kZWZpbmVkLCByZXZlcnNlRGVlcE1lcmdlLCBnZXRGaWVsZE1vZGVsLCBjbG9uZSwgYXNzaWduTW9kZWxUb0ZpZWxkcyB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBtYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZm9ybWx5LWZvcm0nLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxmb3JtbHktZmllbGQgKm5nRm9yPVwibGV0IGZpZWxkIG9mIGZpZWxkc1wiXG4gICAgICBbbW9kZWxdPVwiZmllbGQubW9kZWxcIiBbZm9ybV09XCJmb3JtXCJcbiAgICAgIFtmaWVsZF09XCJmaWVsZFwiXG4gICAgICBbbmdDbGFzc109XCJmaWVsZC5jbGFzc05hbWVcIlxuICAgICAgW29wdGlvbnNdPVwib3B0aW9uc1wiPlxuICAgIDwvZm9ybWx5LWZpZWxkPlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgYCxcbn0pXG5leHBvcnQgY2xhc3MgRm9ybWx5Rm9ybSBpbXBsZW1lbnRzIERvQ2hlY2ssIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KCkgbW9kZWw6IGFueSA9IHt9O1xuICBASW5wdXQoKSBmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXkgPSBuZXcgRm9ybUdyb3VwKHt9KTtcbiAgQElucHV0KCkgZmllbGRzOiBGb3JtbHlGaWVsZENvbmZpZ1tdID0gW107XG4gIEBJbnB1dCgpIG9wdGlvbnM6IEZvcm1seUZvcm1PcHRpb25zO1xuICBAT3V0cHV0KCkgbW9kZWxDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKiogQGludGVybmFsICovXG4gIEBJbnB1dCgpIGlzUm9vdCA9IHRydWU7XG5cbiAgcHJpdmF0ZSBpbml0aWFsTW9kZWw6IGFueTtcbiAgcHJpdmF0ZSBtb2RlbENoYW5nZVN1YnM6IFN1YnNjcmlwdGlvbltdID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBmb3JtbHlCdWlsZGVyOiBGb3JtbHlGb3JtQnVpbGRlcixcbiAgICBwcml2YXRlIGZvcm1seUV4cHJlc3Npb246IEZvcm1seUZvcm1FeHByZXNzaW9uLFxuICAgIHByaXZhdGUgZm9ybWx5Q29uZmlnOiBGb3JtbHlDb25maWcsXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBwYXJlbnRGb3JtOiBOZ0Zvcm0sXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBwYXJlbnRGb3JtR3JvdXA6IEZvcm1Hcm91cERpcmVjdGl2ZSxcbiAgICBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwcml2YXRlIHBhcmVudEZvcm1seUZvcm06IEZvcm1seUZvcm0sXG4gICkge31cblxuICBuZ0RvQ2hlY2soKSB7XG4gICAgdGhpcy5jaGVja0V4cHJlc3Npb25DaGFuZ2UoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoIXRoaXMuZmllbGRzIHx8IHRoaXMuZmllbGRzLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5pc1Jvb3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlcy5maWVsZHMgfHwgY2hhbmdlcy5mb3JtKSB7XG4gICAgICB0aGlzLm1vZGVsID0gdGhpcy5tb2RlbCB8fCB7fTtcbiAgICAgIHRoaXMuZm9ybSA9IHRoaXMuZm9ybSB8fCAobmV3IEZvcm1Hcm91cCh7fSkpO1xuICAgICAgdGhpcy5zZXRPcHRpb25zKCk7XG4gICAgICB0aGlzLmNsZWFyTW9kZWxTdWJzY3JpcHRpb25zKCk7XG4gICAgICB0aGlzLmZvcm1seUJ1aWxkZXIuYnVpbGRGb3JtKHRoaXMuZm9ybSwgdGhpcy5maWVsZHMsIHRoaXMubW9kZWwsIHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRyYWNrTW9kZWxDaGFuZ2VzKHRoaXMuZmllbGRzKTtcbiAgICAgIHRoaXMudXBkYXRlSW5pdGlhbFZhbHVlKCk7XG4gICAgfSBlbHNlIGlmIChjaGFuZ2VzLm1vZGVsKSB7XG4gICAgICB0aGlzLnBhdGNoTW9kZWwodGhpcy5tb2RlbCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5jbGVhck1vZGVsU3Vic2NyaXB0aW9ucygpO1xuICB9XG5cbiAgY2hhbmdlTW9kZWwoZXZlbnQ6IHsga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkgfSkge1xuICAgIGFzc2lnbk1vZGVsVmFsdWUodGhpcy5tb2RlbCwgZXZlbnQua2V5LCBldmVudC52YWx1ZSk7XG4gICAgdGhpcy5tb2RlbENoYW5nZS5lbWl0KHRoaXMubW9kZWwpO1xuICAgIHRoaXMuY2hlY2tFeHByZXNzaW9uQ2hhbmdlKCk7XG4gIH1cblxuICBzZXRPcHRpb25zKCkge1xuICAgIHRoaXMub3B0aW9ucyA9IHRoaXMub3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMub3B0aW9ucy5mb3JtU3RhdGUgPSB0aGlzLm9wdGlvbnMuZm9ybVN0YXRlIHx8IHt9O1xuICAgIGlmICghdGhpcy5vcHRpb25zLnNob3dFcnJvcikge1xuICAgICAgdGhpcy5vcHRpb25zLnNob3dFcnJvciA9IHRoaXMuZm9ybWx5Q29uZmlnLmV4dHJhcy5zaG93RXJyb3I7XG4gICAgfVxuICAgIGlmICghdGhpcy5vcHRpb25zLmZpZWxkQ2hhbmdlcykge1xuICAgICAgdGhpcy5vcHRpb25zLmZpZWxkQ2hhbmdlcyA9IG5ldyBTdWJqZWN0PEZvcm1seVZhbHVlQ2hhbmdlRXZlbnQ+KCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucmVzZXRNb2RlbCkge1xuICAgICAgdGhpcy5vcHRpb25zLnJlc2V0TW9kZWwgPSB0aGlzLnJlc2V0TW9kZWwuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5wYXJlbnRGb3JtKSB7XG4gICAgICB0aGlzLm9wdGlvbnMucGFyZW50Rm9ybSA9IHRoaXMucGFyZW50Rm9ybUdyb3VwIHx8IHRoaXMucGFyZW50Rm9ybTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy51cGRhdGVJbml0aWFsVmFsdWUpIHtcbiAgICAgIHRoaXMub3B0aW9ucy51cGRhdGVJbml0aWFsVmFsdWUgPSB0aGlzLnVwZGF0ZUluaXRpYWxWYWx1ZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGlmICghKDxhbnk+IHRoaXMub3B0aW9ucykucmVzZXRUcmFja01vZGVsQ2hhbmdlcykge1xuICAgICAgKDxhbnk+IHRoaXMub3B0aW9ucykucmVzZXRUcmFja01vZGVsQ2hhbmdlcyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhck1vZGVsU3Vic2NyaXB0aW9ucygpO1xuICAgICAgICB0aGlzLnRyYWNrTW9kZWxDaGFuZ2VzKHRoaXMuZmllbGRzKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0V4cHJlc3Npb25DaGFuZ2UoKSB7XG4gICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICB0aGlzLmZvcm1seUV4cHJlc3Npb24uY2hlY2tGaWVsZHModGhpcy5mb3JtLCB0aGlzLmZpZWxkcywgdGhpcy5tb2RlbCwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRyYWNrTW9kZWxDaGFuZ2VzKGZpZWxkczogRm9ybWx5RmllbGRDb25maWdbXSwgcm9vdEtleTogc3RyaW5nW10gPSBbXSkge1xuICAgIGZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgIGlmIChmaWVsZC5rZXkgJiYgZmllbGQudHlwZSAmJiAhZmllbGQuZmllbGRHcm91cCAmJiAhZmllbGQuZmllbGRBcnJheSkge1xuICAgICAgICBjb25zdCB2YWx1ZUNoYW5nZXMgPSBmaWVsZC5mb3JtQ29udHJvbC52YWx1ZUNoYW5nZXMucGlwZShcbiAgICAgICAgICBmaWVsZC5tb2RlbE9wdGlvbnMgJiYgZmllbGQubW9kZWxPcHRpb25zLmRlYm91bmNlICYmIGZpZWxkLm1vZGVsT3B0aW9ucy5kZWJvdW5jZS5kZWZhdWx0XG4gICAgICAgICAgPyBkZWJvdW5jZVRpbWUoZmllbGQubW9kZWxPcHRpb25zLmRlYm91bmNlLmRlZmF1bHQpXG4gICAgICAgICAgOiB0YXAoKCkgPT4ge30pLFxuICAgICAgICAgIG1hcCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoZmllbGQucGFyc2VycyAmJiBmaWVsZC5wYXJzZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgZmllbGQucGFyc2Vycy5mb3JFYWNoKHBhcnNlckZuID0+IHZhbHVlID0gcGFyc2VyRm4odmFsdWUpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIHRhcCh2YWx1ZSA9PiB0aGlzLmNoYW5nZU1vZGVsKHsga2V5OiBbLi4ucm9vdEtleSwgZmllbGQua2V5XS5qb2luKCcuJyksIHZhbHVlIH0pKSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm1vZGVsQ2hhbmdlU3Vicy5wdXNoKHZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWVsZC5maWVsZEdyb3VwICYmIGZpZWxkLmZpZWxkR3JvdXAubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnRyYWNrTW9kZWxDaGFuZ2VzKGZpZWxkLmZpZWxkR3JvdXAsIGZpZWxkLmtleSA/IFsuLi5yb290S2V5LCBmaWVsZC5rZXldIDogcm9vdEtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyTW9kZWxTdWJzY3JpcHRpb25zKCkge1xuICAgIHRoaXMubW9kZWxDaGFuZ2VTdWJzLmZvckVhY2goc3ViID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICB0aGlzLm1vZGVsQ2hhbmdlU3VicyA9IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBwYXRjaE1vZGVsKG1vZGVsOiBhbnkpIHtcbiAgICBhc3NpZ25Nb2RlbFRvRmllbGRzKHRoaXMuZmllbGRzLCBtb2RlbCk7XG4gICAgdGhpcy5jbGVhck1vZGVsU3Vic2NyaXB0aW9ucygpO1xuICAgIHRoaXMucmVzZXRGaWVsZEFycmF5KHRoaXMuZmllbGRzLCBtb2RlbCk7XG4gICAgdGhpcy5pbml0aWFsaXplRm9ybVZhbHVlKHRoaXMuZm9ybSk7XG4gICAgKDxGb3JtR3JvdXA+IHRoaXMuZm9ybSkucGF0Y2hWYWx1ZShtb2RlbCwgeyBvbmx5U2VsZjogdHJ1ZSB9KTtcbiAgICB0aGlzLnRyYWNrTW9kZWxDaGFuZ2VzKHRoaXMuZmllbGRzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRNb2RlbChtb2RlbD86IGFueSkge1xuICAgIG1vZGVsID0gaXNOdWxsT3JVbmRlZmluZWQobW9kZWwpID8gdGhpcy5pbml0aWFsTW9kZWwgOiBtb2RlbDtcbiAgICB0aGlzLnJlc2V0RmllbGRBcnJheSh0aGlzLmZpZWxkcywgbW9kZWwpO1xuXG4gICAgLy8gd2Ugc2hvdWxkIGNhbGwgYE5nRm9ybTo6cmVzZXRGb3JtYCB0byBlbnN1cmUgY2hhbmdpbmcgYHN1Ym1pdHRlZGAgc3RhdGUgYWZ0ZXIgcmVzZXR0aW5nIGZvcm1cbiAgICAvLyBidXQgb25seSB3aGVuIHRoZSBjdXJyZW50IGNvbXBvbmVudCBpcyBhIHJvb3Qgb25lLlxuICAgIGlmICghdGhpcy5wYXJlbnRGb3JtbHlGb3JtICYmIHRoaXMub3B0aW9ucy5wYXJlbnRGb3JtICYmIHRoaXMub3B0aW9ucy5wYXJlbnRGb3JtLmNvbnRyb2wgPT09IHRoaXMuZm9ybSkge1xuICAgICAgdGhpcy5vcHRpb25zLnBhcmVudEZvcm0ucmVzZXRGb3JtKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JtLnJlc2V0KG1vZGVsKTtcbiAgICB9XG5cbiAgICAoPGFueT4gdGhpcy5vcHRpb25zKS5yZXNldFRyYWNrTW9kZWxDaGFuZ2VzKCk7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0RmllbGRBcnJheShmaWVsZHM6IEZvcm1seUZpZWxkQ29uZmlnW10sIG5ld01vZGVsOiBhbnkpIHtcbiAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICBpZiAoKGZpZWxkLmZpZWxkR3JvdXAgJiYgZmllbGQuZmllbGRHcm91cC5sZW5ndGggPiAwKSB8fCBmaWVsZC5maWVsZEFycmF5KSB7XG4gICAgICAgIGNvbnN0IG5ld0ZpZWxkTW9kZWwgPSBnZXRGaWVsZE1vZGVsKG5ld01vZGVsLCBmaWVsZCwgdHJ1ZSk7XG4gICAgICAgIGlmIChmaWVsZC5maWVsZEFycmF5KSB7XG4gICAgICAgICAgZmllbGQuZmllbGRHcm91cCA9IGZpZWxkLmZpZWxkR3JvdXAgfHwgW107XG4gICAgICAgICAgZmllbGQuZmllbGRHcm91cC5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgaWYgKGZpZWxkLm1vZGVsICE9PSBuZXdGaWVsZE1vZGVsICYmIGZpZWxkLm1vZGVsKSB7XG4gICAgICAgICAgICBmaWVsZC5tb2RlbC5sZW5ndGggPSAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGZvcm1Db250cm9sID0gPEZvcm1BcnJheT5maWVsZC5mb3JtQ29udHJvbDtcbiAgICAgICAgICB3aGlsZSAoZm9ybUNvbnRyb2wubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBmb3JtQ29udHJvbC5yZW1vdmVBdCgwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXdGaWVsZE1vZGVsLmZvckVhY2goKG06IGFueSwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBmaWVsZC5tb2RlbFtpXSA9IG07XG4gICAgICAgICAgICBmaWVsZC5maWVsZEdyb3VwLnB1c2goeyAuLi5jbG9uZShmaWVsZC5maWVsZEFycmF5KSwga2V5OiBgJHtpfWAgfSk7XG4gICAgICAgICAgICB0aGlzLmZvcm1seUJ1aWxkZXIuYnVpbGRGb3JtKGZvcm1Db250cm9sLCBbZmllbGQuZmllbGRHcm91cFtpXV0sIG5ld0ZpZWxkTW9kZWwsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXNldEZpZWxkQXJyYXkoZmllbGQuZmllbGRHcm91cCwgbmV3RmllbGRNb2RlbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZmllbGQua2V5ICYmIGZpZWxkLnR5cGUpIHtcbiAgICAgICAgZmllbGQuZm9ybUNvbnRyb2wucmVzZXQoZ2V0RmllbGRNb2RlbChuZXdNb2RlbCwgZmllbGQsIGZhbHNlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVGb3JtVmFsdWUoY29udHJvbDogQWJzdHJhY3RDb250cm9sKSB7XG4gICAgaWYgKGNvbnRyb2wgaW5zdGFuY2VvZiBGb3JtQ29udHJvbCkge1xuICAgICAgY29udHJvbC5zZXRWYWx1ZShudWxsKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRyb2wgaW5zdGFuY2VvZiBGb3JtR3JvdXApIHtcbiAgICAgIE9iamVjdC5rZXlzKGNvbnRyb2wuY29udHJvbHMpLmZvckVhY2goayA9PiB0aGlzLmluaXRpYWxpemVGb3JtVmFsdWUoY29udHJvbC5jb250cm9sc1trXSkpO1xuICAgIH0gZWxzZSBpZiAoY29udHJvbCBpbnN0YW5jZW9mIEZvcm1BcnJheSkge1xuICAgICAgY29udHJvbC5jb250cm9scy5mb3JFYWNoKGMgPT4gdGhpcy5pbml0aWFsaXplRm9ybVZhbHVlKGMpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUluaXRpYWxWYWx1ZSgpIHtcbiAgICB0aGlzLmluaXRpYWxNb2RlbCA9IHJldmVyc2VEZWVwTWVyZ2Uoe30sIHRoaXMubW9kZWwpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBDb21wb25lbnQsIE9uSW5pdCwgT25DaGFuZ2VzLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIE9uRGVzdHJveSxcbiAgVmlld0NvbnRhaW5lclJlZiwgVmlld0NoaWxkLCBDb21wb25lbnRSZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgU2ltcGxlQ2hhbmdlcywgRG9DaGVjaywgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBGb3JtbHlDb25maWcgfSBmcm9tICcuLi9zZXJ2aWNlcy9mb3JtbHkuY29uZmlnJztcbmltcG9ydCB7IEZpZWxkIH0gZnJvbSAnLi4vdGVtcGxhdGVzL2ZpZWxkJztcbmltcG9ydCB7IEZvcm1seUZpZWxkQ29uZmlnLCBGb3JtbHlGb3JtT3B0aW9ucywgRm9ybWx5TGlmZUN5Y2xlRm4sIEZvcm1seUxpZmVDeWNsZU9wdGlvbnMgfSBmcm9tICcuL2Zvcm1seS5maWVsZC5jb25maWcnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmb3JtbHktZmllbGQnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuZy10ZW1wbGF0ZSAjZmllbGRDb21wb25lbnQ+PC9uZy10ZW1wbGF0ZT5cbiAgICA8ZGl2ICpuZ0lmPVwiZmllbGQudGVtcGxhdGUgJiYgIWZpZWxkLmZpZWxkR3JvdXBcIiBbaW5uZXJIdG1sXT1cImZpZWxkLnRlbXBsYXRlXCI+PC9kaXY+XG4gIGAsXG4gIGhvc3Q6IHtcbiAgICAnW3N0eWxlLmRpc3BsYXldJzogJ2ZpZWxkLmhpZGUgPyBcIm5vbmVcIjpcIlwiJyxcbiAgfSxcbn0pXG5leHBvcnQgY2xhc3MgRm9ybWx5RmllbGQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgRG9DaGVjaywgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgbW9kZWw6IGFueTtcbiAgQElucHV0KCkgZm9ybTogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBmaWVsZDogRm9ybWx5RmllbGRDb25maWc7XG4gIEBJbnB1dCgpIG9wdGlvbnM6IEZvcm1seUZvcm1PcHRpb25zID0ge307XG4gIEBPdXRwdXQoKSBtb2RlbENoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBWaWV3Q2hpbGQoJ2ZpZWxkQ29tcG9uZW50Jywge3JlYWQ6IFZpZXdDb250YWluZXJSZWZ9KSBmaWVsZENvbXBvbmVudDogVmlld0NvbnRhaW5lclJlZjtcblxuICBwcml2YXRlIGNvbXBvbmVudFJlZnM6IENvbXBvbmVudFJlZjxGaWVsZD5bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZm9ybWx5Q29uZmlnOiBGb3JtbHlDb25maWcsXG4gICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICB0aGlzLmxpZmVDeWNsZUhvb2tzKHRoaXMubGlmZWN5Y2xlLmFmdGVyQ29udGVudEluaXQpO1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCkge1xuICAgIHRoaXMubGlmZUN5Y2xlSG9va3ModGhpcy5saWZlY3ljbGUuYWZ0ZXJDb250ZW50Q2hlY2tlZCk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5saWZlQ3ljbGVIb29rcyh0aGlzLmxpZmVjeWNsZS5hZnRlclZpZXdJbml0KTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICB0aGlzLmxpZmVDeWNsZUhvb2tzKHRoaXMubGlmZWN5Y2xlLmFmdGVyVmlld0NoZWNrZWQpO1xuICB9XG5cbiAgbmdEb0NoZWNrKCkge1xuICAgIHRoaXMubGlmZUN5Y2xlSG9va3ModGhpcy5saWZlY3ljbGUuZG9DaGVjayk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMuZmllbGQudGVtcGxhdGUpIHtcbiAgICAgIHRoaXMuY3JlYXRlRmllbGRDb21wb25lbnQoKTtcbiAgICB9XG4gICAgdGhpcy5saWZlQ3ljbGVIb29rcyh0aGlzLmxpZmVjeWNsZS5vbkluaXQpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIHRoaXMubGlmZUN5Y2xlSG9va3ModGhpcy5saWZlY3ljbGUub25DaGFuZ2VzKTtcbiAgICB0aGlzLmNvbXBvbmVudFJlZnMuZm9yRWFjaChyZWYgPT4ge1xuICAgICAgT2JqZWN0LmFzc2lnbihyZWYuaW5zdGFuY2UsIHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgIGZvcm06IHRoaXMuZm9ybSxcbiAgICAgICAgZmllbGQ6IHRoaXMuZmllbGQsXG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5saWZlQ3ljbGVIb29rcyh0aGlzLmxpZmVjeWNsZS5vbkRlc3Ryb3kpO1xuICAgIHRoaXMuY29tcG9uZW50UmVmcy5mb3JFYWNoKGNvbXBvbmVudFJlZiA9PiBjb21wb25lbnRSZWYuZGVzdHJveSgpKTtcbiAgICB0aGlzLmNvbXBvbmVudFJlZnMgPSBbXTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRmllbGRDb21wb25lbnQoKTogQ29tcG9uZW50UmVmPEZpZWxkPiB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMuZm9ybWx5Q29uZmlnLmdldFR5cGUodGhpcy5maWVsZC50eXBlKTtcblxuICAgIGxldCBmaWVsZENvbXBvbmVudCA9IHRoaXMuZmllbGRDb21wb25lbnQ7XG4gICAgKHRoaXMuZmllbGQud3JhcHBlcnMgfHwgW10pLmZvckVhY2god3JhcHBlck5hbWUgPT4ge1xuICAgICAgY29uc3Qgd3JhcHBlclJlZiA9IHRoaXMuY3JlYXRlQ29tcG9uZW50KGZpZWxkQ29tcG9uZW50LCB0aGlzLmZvcm1seUNvbmZpZy5nZXRXcmFwcGVyKHdyYXBwZXJOYW1lKS5jb21wb25lbnQpO1xuICAgICAgZmllbGRDb21wb25lbnQgPSB3cmFwcGVyUmVmLmluc3RhbmNlLmZpZWxkQ29tcG9uZW50O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ29tcG9uZW50KGZpZWxkQ29tcG9uZW50LCB0eXBlLmNvbXBvbmVudCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNvbXBvbmVudChmaWVsZENvbXBvbmVudDogVmlld0NvbnRhaW5lclJlZiwgY29tcG9uZW50OiBhbnkpOiBDb21wb25lbnRSZWY8YW55PiB7XG4gICAgbGV0IGNvbXBvbmVudEZhY3RvcnkgPSB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShjb21wb25lbnQpO1xuICAgIGxldCByZWYgPSA8Q29tcG9uZW50UmVmPEZpZWxkPj5maWVsZENvbXBvbmVudC5jcmVhdGVDb21wb25lbnQoY29tcG9uZW50RmFjdG9yeSk7XG5cbiAgICBPYmplY3QuYXNzaWduKHJlZi5pbnN0YW5jZSwge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgZm9ybTogdGhpcy5mb3JtLFxuICAgICAgICBmaWVsZDogdGhpcy5maWVsZCxcbiAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wb25lbnRSZWZzLnB1c2gocmVmKTtcblxuICAgIHJldHVybiByZWY7XG4gIH1cblxuICBwcml2YXRlIGdldCBsaWZlY3ljbGUoKTogRm9ybWx5TGlmZUN5Y2xlT3B0aW9ucyB7XG4gICAgcmV0dXJuIHRoaXMuZmllbGQubGlmZWN5Y2xlIHx8IHt9O1xuICB9XG5cbiAgcHJpdmF0ZSBsaWZlQ3ljbGVIb29rcyhjYWxsYmFjazogRm9ybWx5TGlmZUN5Y2xlRm4pIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKHRoaXMuZm9ybSwgdGhpcy5maWVsZCwgdGhpcy5tb2RlbCwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgSG9zdExpc3RlbmVyLCBFbGVtZW50UmVmLCBJbnB1dCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBTaW1wbGVDaGFuZ2UsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybWx5RmllbGRDb25maWcgfSBmcm9tICcuL2Zvcm1seS5maWVsZC5jb25maWcnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbZm9ybWx5QXR0cmlidXRlc10nLFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtbHlBdHRyaWJ1dGVzIGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgQElucHV0KCdmb3JtbHlBdHRyaWJ1dGVzJykgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnO1xuICBwcml2YXRlIGF0dHJpYnV0ZXMgPSBbJ2lkJywgJ25hbWUnLCAncGxhY2Vob2xkZXInLCAndGFiaW5kZXgnLCAnc3RlcCcsICdyZWFkb25seSddO1xuICBwcml2YXRlIHN0YXRlbWVudHMgPSBbJ2NoYW5nZScsICdrZXlkb3duJywgJ2tleXVwJywgJ2tleXByZXNzJywgJ2NsaWNrJywgJ2ZvY3VzJywgJ2JsdXInXTtcblxuICBASG9zdExpc3RlbmVyKCdmb2N1cycpIG9uRm9jdXMoKSB7XG4gICAgdGhpcy5maWVsZC5mb2N1cyA9IHRydWU7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdibHVyJykgb25CbHVyKCkge1xuICAgIHRoaXMuZmllbGQuZm9jdXMgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICkge31cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuZmllbGQpIHtcbiAgICAgIGNvbnN0IGZpZWxkQ2hhbmdlcyA9IGNoYW5nZXMuZmllbGQ7XG4gICAgICB0aGlzLmF0dHJpYnV0ZXNcbiAgICAgICAgLmZpbHRlcihhdHRyID0+IHRoaXMuY2FuQXBwbHlSZW5kZXIoZmllbGRDaGFuZ2VzLCBhdHRyKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgYXR0ciwgdGhpcy5nZXRQcm9wVmFsdWUodGhpcy5maWVsZCwgYXR0ciksXG4gICAgICAgICkpO1xuXG4gICAgICBpZiAodGhpcy5maWVsZC50ZW1wbGF0ZU9wdGlvbnMgJiYgdGhpcy5maWVsZC50ZW1wbGF0ZU9wdGlvbnMuYXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gdGhpcy5maWVsZC50ZW1wbGF0ZU9wdGlvbnMuYXR0cmlidXRlcztcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChuYW1lID0+IHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKFxuICAgICAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBuYW1lLCBhdHRyaWJ1dGVzW25hbWVdIGFzIHN0cmluZyxcbiAgICAgICAgKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhdGVtZW50c1xuICAgICAgICAuZmlsdGVyKHN0YXRlbWVudCA9PiB0aGlzLmNhbkFwcGx5UmVuZGVyKGZpZWxkQ2hhbmdlcywgc3RhdGVtZW50KSlcbiAgICAgICAgLmZvckVhY2goc3RhdGVtZW50ID0+IHRoaXMucmVuZGVyZXIubGlzdGVuKFxuICAgICAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBzdGF0ZW1lbnQsIHRoaXMuZ2V0U3RhdGVtZW50VmFsdWUoc3RhdGVtZW50KSxcbiAgICAgICAgKSk7XG5cbiAgICAgIGlmICgoZmllbGRDaGFuZ2VzLnByZXZpb3VzVmFsdWUgfHwge30pLmZvY3VzICE9PSAoZmllbGRDaGFuZ2VzLmN1cnJlbnRWYWx1ZSB8fCB7fSkuZm9jdXMgJiYgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnRbdGhpcy5maWVsZC5mb2N1cyA/ICdmb2N1cycgOiAnYmx1ciddKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRQcm9wVmFsdWUoZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnLCBwcm9wOiBzdHJpbmcpIHtcbiAgICBmaWVsZCA9IGZpZWxkIHx8IHt9O1xuICAgIGlmIChmaWVsZC50ZW1wbGF0ZU9wdGlvbnMgJiYgZmllbGQudGVtcGxhdGVPcHRpb25zW3Byb3BdKSB7XG4gICAgICByZXR1cm4gZmllbGQudGVtcGxhdGVPcHRpb25zW3Byb3BdO1xuICAgIH1cblxuICAgIHJldHVybiAoPGFueT5maWVsZClbcHJvcF0gfHwgJyc7XG4gIH1cblxuICBwcml2YXRlIGdldFN0YXRlbWVudFZhbHVlKHN0YXRlbWVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgZm4gPSB0aGlzLmZpZWxkLnRlbXBsYXRlT3B0aW9uc1tzdGF0ZW1lbnRdO1xuXG4gICAgcmV0dXJuIChldmVudDogYW55KSA9PiBmbih0aGlzLmZpZWxkLCBldmVudCk7XG4gIH1cblxuICBwcml2YXRlIGNhbkFwcGx5UmVuZGVyKGZpZWxkQ2hhbmdlOiBTaW1wbGVDaGFuZ2UsIHByb3A6IHN0cmluZyk6IEJvb2xlYW4ge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0UHJvcFZhbHVlKHRoaXMuZmllbGQsIHByb3ApLFxuICAgICAgcHJldmlvdXNWYWx1ZSA9IHRoaXMuZ2V0UHJvcFZhbHVlKGZpZWxkQ2hhbmdlLnByZXZpb3VzVmFsdWUsIHByb3ApO1xuXG4gICAgaWYgKHByZXZpb3VzVmFsdWUgIT09IGN1cnJlbnRWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdGVtZW50cy5pbmRleE9mKHByb3ApICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBBYnN0cmFjdENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBGb3JtbHlUZW1wbGF0ZU9wdGlvbnMsIEZvcm1seUZpZWxkQ29uZmlnLCBGb3JtbHlGb3JtT3B0aW9ucyB9IGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybWx5LmZpZWxkLmNvbmZpZyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWVsZCB7XG4gIEBJbnB1dCgpIGZvcm06IEZvcm1Hcm91cDtcbiAgQElucHV0KCkgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnO1xuICBASW5wdXQoKSBtb2RlbDogYW55O1xuICBASW5wdXQoKSBvcHRpb25zOiBGb3JtbHlGb3JtT3B0aW9ucztcblxuICBnZXQga2V5KCkgeyByZXR1cm4gdGhpcy5maWVsZC5rZXk7IH1cblxuICBnZXQgZm9ybUNvbnRyb2woKTogQWJzdHJhY3RDb250cm9sIHsgcmV0dXJuIHRoaXMuZmllbGQuZm9ybUNvbnRyb2w7IH1cblxuICBnZXQgdG8oKTogRm9ybWx5VGVtcGxhdGVPcHRpb25zIHsgcmV0dXJuIHRoaXMuZmllbGQudGVtcGxhdGVPcHRpb25zOyB9XG5cbiAgZ2V0IHNob3dFcnJvcigpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMub3B0aW9ucy5zaG93RXJyb3IodGhpcyk7IH1cblxuICBnZXQgaWQoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuZmllbGQuaWQ7IH1cblxuICBnZXQgZm9ybVN0YXRlKCkgeyByZXR1cm4gdGhpcy5vcHRpb25zLmZvcm1TdGF0ZSB8fCB7fTsgfVxufVxuIiwiaW1wb3J0IHsgRmllbGQgfSBmcm9tICcuL2ZpZWxkJztcbmltcG9ydCB7IE9uSW5pdCwgT25DaGFuZ2VzLCBEb0NoZWNrLCBBZnRlckNvbnRlbnRJbml0LCBBZnRlckNvbnRlbnRDaGVja2VkLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0NoZWNrZWQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZpZWxkVHlwZSBleHRlbmRzIEZpZWxkIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIERvQ2hlY2ssIEFmdGVyQ29udGVudEluaXQsIEFmdGVyQ29udGVudENoZWNrZWQsIEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG4gIG5nT25Jbml0KCkge31cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge31cbiAgbmdEb0NoZWNrKCkge31cbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge31cbiAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCkge31cbiAgbmdBZnRlclZpZXdJbml0KCkge31cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge31cbiAgbmdPbkRlc3Ryb3koKSB7fVxufVxuIiwiaW1wb3J0IHsgRm9ybUFycmF5IH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSAnLi9maWVsZC50eXBlJztcbmltcG9ydCB7IGNsb25lLCBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IEZvcm1seUZvcm1CdWlsZGVyIH0gZnJvbSAnLi4vc2VydmljZXMvZm9ybWx5LmZvcm0uYnVpbGRlcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWVsZEFycmF5VHlwZSBleHRlbmRzIEZpZWxkVHlwZSB7XG4gIGZvcm1Db250cm9sOiBGb3JtQXJyYXk7XG5cbiBjb25zdHJ1Y3Rvcihwcml2YXRlIGJ1aWxkZXI6IEZvcm1seUZvcm1CdWlsZGVyKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGFkZChpPzogbnVtYmVyLCBpbml0aWFsTW9kZWw/OiBhbnkpIHtcbiAgICBpID0gaXNOdWxsT3JVbmRlZmluZWQoaSkgPyB0aGlzLmZpZWxkLmZpZWxkR3JvdXAubGVuZ3RoIDogaTtcblxuICAgIHRoaXMubW9kZWwuc3BsaWNlKGksIDAsIGluaXRpYWxNb2RlbCA/IGNsb25lKGluaXRpYWxNb2RlbCkgOiB1bmRlZmluZWQpO1xuICAgIHRoaXMuZmllbGQuZmllbGRHcm91cC5zcGxpY2UoaSwgMCwgeyAuLi5jbG9uZSh0aGlzLmZpZWxkLmZpZWxkQXJyYXkpIH0pO1xuXG4gICAgdGhpcy5maWVsZC5maWVsZEdyb3VwLmZvckVhY2goKGZpZWxkLCBpbmRleCkgPT4ge1xuICAgICAgZmllbGQua2V5ID0gYCR7aW5kZXh9YDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybUFycmF5KFtdKTtcbiAgICB0aGlzLmJ1aWxkZXIuYnVpbGRGb3JtKGZvcm0sIFt0aGlzLmZpZWxkLmZpZWxkR3JvdXBbaV1dLCB0aGlzLm1vZGVsLCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuZm9ybUNvbnRyb2wuaW5zZXJ0KGksIGZvcm0uYXQoMCkpO1xuXG4gICAgKDxhbnk+IHRoaXMub3B0aW9ucykucmVzZXRUcmFja01vZGVsQ2hhbmdlcygpO1xuICB9XG5cbiAgcmVtb3ZlKGk6IG51bWJlcikge1xuICAgIHRoaXMuZm9ybUNvbnRyb2wucmVtb3ZlQXQoaSk7XG4gICAgdGhpcy5maWVsZC5maWVsZEdyb3VwLnNwbGljZShpLCAxKTtcbiAgICB0aGlzLmZpZWxkLmZpZWxkR3JvdXAuZm9yRWFjaCgoZiwgaW5kZXgpID0+IGYua2V5ID0gYCR7aW5kZXh9YCk7XG4gICAgdGhpcy5tb2RlbC5zcGxpY2UoaSwgMSk7XG4gICAgKDxhbnk+IHRoaXMub3B0aW9ucykucmVzZXRUcmFja01vZGVsQ2hhbmdlcygpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBWaWV3Q29udGFpbmVyUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGaWVsZCB9IGZyb20gJy4vZmllbGQnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRmllbGRXcmFwcGVyIGV4dGVuZHMgRmllbGQge1xuICBmaWVsZENvbXBvbmVudDogVmlld0NvbnRhaW5lclJlZjtcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSAnLi4vdGVtcGxhdGVzL2ZpZWxkLnR5cGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmb3JtbHktZ3JvdXAnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxmb3JtbHktZm9ybVxuICAgICAgW2ZpZWxkc109XCJmaWVsZC5maWVsZEdyb3VwXCJcbiAgICAgIFtpc1Jvb3RdPVwiZmFsc2VcIlxuICAgICAgW21vZGVsXT1cIm1vZGVsXCJcbiAgICAgIFtmb3JtXT1cImZpZWxkLmZvcm1Db250cm9sIHx8IGZvcm1cIlxuICAgICAgW29wdGlvbnNdPVwib3B0aW9uc1wiXG4gICAgICBbbmdDbGFzc109XCJmaWVsZC5maWVsZEdyb3VwQ2xhc3NOYW1lXCI+XG4gICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgPC9mb3JtbHktZm9ybT5cbiAgYCxcbn0pXG5leHBvcnQgY2xhc3MgRm9ybWx5R3JvdXAgZXh0ZW5kcyBGaWVsZFR5cGUge31cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRm9ybWx5Q29uZmlnIH0gZnJvbSAnLi4vc2VydmljZXMvZm9ybWx5LmNvbmZpZyc7XG5pbXBvcnQgeyBGb3JtbHlGaWVsZENvbmZpZyB9IGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybWx5LmZpZWxkLmNvbmZpZyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zvcm1seS12YWxpZGF0aW9uLW1lc3NhZ2UnLFxuICB0ZW1wbGF0ZTogYHt7IGVycm9yTWVzc2FnZSB9fWAsXG59KVxuZXhwb3J0IGNsYXNzIEZvcm1seVZhbGlkYXRpb25NZXNzYWdlIHtcbiAgQElucHV0KCkgZmllbGQ6IEZvcm1seUZpZWxkQ29uZmlnO1xuICBASW5wdXQoKSBzZXQgZmllbGRGb3JtKGNvbnRyb2w6IEZvcm1Db250cm9sKSB7XG4gICAgY29uc29sZS53YXJuKGBmb3JtbHktdmFsaWRhdGlvbi1tZXNzYWdlOiBQYXNzaW5nICdmaWVsZEZvcm0nIGlucHV0IGlzIGRlcHJlY2F0ZWQgYW5kIGl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgNC4wIHZlcnNpb24uYCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZvcm1seUNvbmZpZzogRm9ybWx5Q29uZmlnKSB7fVxuXG4gIGdldCBlcnJvck1lc3NhZ2UoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmaWVsZEZvcm0gPSB0aGlzLmZpZWxkLmZvcm1Db250cm9sO1xuICAgIGZvciAobGV0IGVycm9yIGluIGZpZWxkRm9ybS5lcnJvcnMpIHtcbiAgICAgIGlmIChmaWVsZEZvcm0uZXJyb3JzLmhhc093blByb3BlcnR5KGVycm9yKSkge1xuICAgICAgICBsZXQgbWVzc2FnZTogc3RyaW5nIHwgRnVuY3Rpb24gPSB0aGlzLmZvcm1seUNvbmZpZy5nZXRWYWxpZGF0b3JNZXNzYWdlKGVycm9yKTtcblxuICAgICAgICBpZiAodGhpcy5maWVsZC52YWxpZGF0aW9uICYmIHRoaXMuZmllbGQudmFsaWRhdGlvbi5tZXNzYWdlcyAmJiB0aGlzLmZpZWxkLnZhbGlkYXRpb24ubWVzc2FnZXNbZXJyb3JdKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IHRoaXMuZmllbGQudmFsaWRhdGlvbi5tZXNzYWdlc1tlcnJvcl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5maWVsZC52YWxpZGF0b3JzICYmIHRoaXMuZmllbGQudmFsaWRhdG9yc1tlcnJvcl0gJiYgdGhpcy5maWVsZC52YWxpZGF0b3JzW2Vycm9yXS5tZXNzYWdlKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IHRoaXMuZmllbGQudmFsaWRhdG9yc1tlcnJvcl0ubWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmZpZWxkLmFzeW5jVmFsaWRhdG9ycyAmJiB0aGlzLmZpZWxkLmFzeW5jVmFsaWRhdG9yc1tlcnJvcl0gJiYgdGhpcy5maWVsZC5hc3luY1ZhbGlkYXRvcnNbZXJyb3JdLm1lc3NhZ2UpIHtcbiAgICAgICAgICBtZXNzYWdlID0gdGhpcy5maWVsZC5hc3luY1ZhbGlkYXRvcnNbZXJyb3JdLm1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gbWVzc2FnZShmaWVsZEZvcm0uZXJyb3JzW2Vycm9yXSwgdGhpcy5maWVsZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBBTkFMWVpFX0ZPUl9FTlRSWV9DT01QT05FTlRTIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEZvcm1seUZvcm0gfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybWx5LmZvcm0nO1xuaW1wb3J0IHsgRm9ybWx5RmllbGQgfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybWx5LmZpZWxkJztcbmltcG9ydCB7IEZvcm1seUF0dHJpYnV0ZXMgfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybWx5LmF0dHJpYnV0ZXMnO1xuaW1wb3J0IHsgRm9ybWx5Q29uZmlnLCBDb25maWdPcHRpb24sIEZPUk1MWV9DT05GSUdfVE9LRU4gfSBmcm9tICcuL3NlcnZpY2VzL2Zvcm1seS5jb25maWcnO1xuaW1wb3J0IHsgRm9ybWx5Rm9ybUJ1aWxkZXIgfSBmcm9tICcuL3NlcnZpY2VzL2Zvcm1seS5mb3JtLmJ1aWxkZXInO1xuaW1wb3J0IHsgRm9ybWx5Rm9ybUV4cHJlc3Npb24gfSBmcm9tICcuL3NlcnZpY2VzL2Zvcm1seS5mb3JtLmV4cHJlc3Npb24nO1xuaW1wb3J0IHsgRm9ybWx5R3JvdXAgfSBmcm9tICcuL2NvbXBvbmVudHMvZm9ybWx5Lmdyb3VwJztcbmltcG9ydCB7IEZvcm1seVZhbGlkYXRpb25NZXNzYWdlIH0gZnJvbSAnLi90ZW1wbGF0ZXMvZm9ybWx5LnZhbGlkYXRpb24tbWVzc2FnZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW0Zvcm1seUZvcm0sIEZvcm1seUZpZWxkLCBGb3JtbHlBdHRyaWJ1dGVzLCBGb3JtbHlHcm91cCwgRm9ybWx5VmFsaWRhdGlvbk1lc3NhZ2VdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtGb3JtbHlHcm91cF0sXG4gIGV4cG9ydHM6IFtGb3JtbHlGb3JtLCBGb3JtbHlGaWVsZCwgRm9ybWx5QXR0cmlidXRlcywgRm9ybWx5R3JvdXAsIEZvcm1seVZhbGlkYXRpb25NZXNzYWdlXSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtbHlNb2R1bGUge1xuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IENvbmZpZ09wdGlvbiA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBGb3JtbHlNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgRm9ybWx5Rm9ybUJ1aWxkZXIsXG4gICAgICAgIEZvcm1seUZvcm1FeHByZXNzaW9uLFxuICAgICAgICBGb3JtbHlDb25maWcsXG4gICAgICAgIHsgcHJvdmlkZTogRk9STUxZX0NPTkZJR19UT0tFTiwgdXNlVmFsdWU6IHsgdHlwZXM6IFt7IG5hbWU6ICdmb3JtbHktZ3JvdXAnLCBjb21wb25lbnQ6IEZvcm1seUdyb3VwIH1dIH0sIG11bHRpOiB0cnVlIH0sXG4gICAgICAgIHsgcHJvdmlkZTogRk9STUxZX0NPTkZJR19UT0tFTiwgdXNlVmFsdWU6IGNvbmZpZywgbXVsdGk6IHRydWUgfSxcbiAgICAgICAgeyBwcm92aWRlOiBBTkFMWVpFX0ZPUl9FTlRSWV9DT01QT05FTlRTLCB1c2VWYWx1ZTogY29uZmlnLCBtdWx0aTogdHJ1ZSB9LFxuICAgICAgXSxcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGZvckNoaWxkKGNvbmZpZzogQ29uZmlnT3B0aW9uID0ge30pOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IEZvcm1seU1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7IHByb3ZpZGU6IEZPUk1MWV9DT05GSUdfVE9LRU4sIHVzZVZhbHVlOiBjb25maWcsIG11bHRpOiB0cnVlIH0sXG4gICAgICAgIHsgcHJvdmlkZTogQU5BTFlaRV9GT1JfRU5UUllfQ09NUE9ORU5UUywgdXNlVmFsdWU6IGNvbmZpZywgbXVsdGk6IHRydWUgfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInRzbGliXzEuX192YWx1ZXMiLCJPYnNlcnZhYmxlIiwiSW5qZWN0aW9uVG9rZW4iLCJJbmplY3RhYmxlIiwiSW5qZWN0IiwiRm9ybUFycmF5IiwiRm9ybUdyb3VwIiwiVmFsaWRhdG9ycyIsIkFic3RyYWN0Q29udHJvbCIsIkZvcm1Db250cm9sIiwiRXZlbnRFbWl0dGVyIiwiU3ViamVjdCIsImRlYm91bmNlVGltZSIsInRhcCIsIm1hcCIsInRzbGliXzEuX19zcHJlYWQiLCJDb21wb25lbnQiLCJOZ0Zvcm0iLCJPcHRpb25hbCIsIkZvcm1Hcm91cERpcmVjdGl2ZSIsIlNraXBTZWxmIiwiSW5wdXQiLCJPdXRwdXQiLCJDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIiLCJWaWV3Q2hpbGQiLCJWaWV3Q29udGFpbmVyUmVmIiwiRGlyZWN0aXZlIiwiUmVuZGVyZXIyIiwiRWxlbWVudFJlZiIsIkhvc3RMaXN0ZW5lciIsInRzbGliXzEuX19leHRlbmRzIiwiQU5BTFlaRV9GT1JfRU5UUllfQ09NUE9ORU5UUyIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIiwiUmVhY3RpdmVGb3Jtc01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0lBQUE7Ozs7Ozs7Ozs7Ozs7O0lBY0E7SUFFQSxJQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYztTQUNwQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsWUFBWSxLQUFLLElBQUksVUFBVSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1RSxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQUUsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztnQkFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUUvRSx1QkFBMEIsQ0FBQyxFQUFFLENBQUM7UUFDMUIsYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwQixnQkFBZ0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFD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