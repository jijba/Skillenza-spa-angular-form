/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Directive, HostListener, ElementRef, Input, Renderer2 } from '@angular/core';
var FormlyAttributes = /** @class */ (function () {
    function FormlyAttributes(renderer, elementRef) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.attributes = ['id', 'name', 'placeholder', 'tabindex', 'step', 'readonly'];
        this.statements = ['change', 'keydown', 'keyup', 'keypress', 'click', 'focus', 'blur'];
    }
    /**
     * @return {?}
     */
    FormlyAttributes.prototype.onFocus = /**
     * @return {?}
     */
    function () {
        this.field.focus = true;
    };
    /**
     * @return {?}
     */
    FormlyAttributes.prototype.onBlur = /**
     * @return {?}
     */
    function () {
        this.field.focus = false;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FormlyAttributes.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (changes["field"]) {
            var /** @type {?} */ fieldChanges_1 = changes["field"];
            this.attributes
                .filter(function (attr) { return _this.canApplyRender(fieldChanges_1, attr); })
                .forEach(function (attr) { return _this.renderer.setAttribute(_this.elementRef.nativeElement, attr, _this.getPropValue(_this.field, attr)); });
            if (this.field.templateOptions && this.field.templateOptions.attributes) {
                var /** @type {?} */ attributes_1 = this.field.templateOptions.attributes;
                Object.keys(attributes_1).forEach(function (name) { return _this.renderer.setAttribute(_this.elementRef.nativeElement, name, /** @type {?} */ (attributes_1[name])); });
            }
            this.statements
                .filter(function (statement) { return _this.canApplyRender(fieldChanges_1, statement); })
                .forEach(function (statement) { return _this.renderer.listen(_this.elementRef.nativeElement, statement, _this.getStatementValue(statement)); });
            if ((fieldChanges_1.previousValue || {}).focus !== (fieldChanges_1.currentValue || {}).focus && this.elementRef.nativeElement.focus) {
                this.elementRef.nativeElement[this.field.focus ? 'focus' : 'blur']();
            }
        }
    };
    /**
     * @param {?} field
     * @param {?} prop
     * @return {?}
     */
    FormlyAttributes.prototype.getPropValue = /**
     * @param {?} field
     * @param {?} prop
     * @return {?}
     */
    function (field, prop) {
        field = field || {};
        if (field.templateOptions && field.templateOptions[prop]) {
            return field.templateOptions[prop];
        }
        return (/** @type {?} */ (field))[prop] || '';
    };
    /**
     * @param {?} statement
     * @return {?}
     */
    FormlyAttributes.prototype.getStatementValue = /**
     * @param {?} statement
     * @return {?}
     */
    function (statement) {
        var _this = this;
        var /** @type {?} */ fn = this.field.templateOptions[statement];
        return function (event) { return fn(_this.field, event); };
    };
    /**
     * @param {?} fieldChange
     * @param {?} prop
     * @return {?}
     */
    FormlyAttributes.prototype.canApplyRender = /**
     * @param {?} fieldChange
     * @param {?} prop
     * @return {?}
     */
    function (fieldChange, prop) {
        var /** @type {?} */ currentValue = this.getPropValue(this.field, prop), /** @type {?} */
        previousValue = this.getPropValue(fieldChange.previousValue, prop);
        if (previousValue !== currentValue) {
            if (this.statements.indexOf(prop) !== -1) {
                return typeof currentValue === 'function';
            }
            return true;
        }
        return false;
    };
    FormlyAttributes.decorators = [
        { type: Directive, args: [{
                    selector: '[formlyAttributes]',
                },] },
    ];
    /** @nocollapse */
    FormlyAttributes.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef }
    ]; };
    FormlyAttributes.propDecorators = {
        field: [{ type: Input, args: ['formlyAttributes',] }],
        onFocus: [{ type: HostListener, args: ['focus',] }],
        onBlur: [{ type: HostListener, args: ['blur',] }]
    };
    return FormlyAttributes;
}());
export { FormlyAttributes };
function FormlyAttributes_tsickle_Closure_declarations() {
    /** @type {?} */
    FormlyAttributes.prototype.field;
    /** @type {?} */
    FormlyAttributes.prototype.attributes;
    /** @type {?} */
    FormlyAttributes.prototype.statements;
    /** @type {?} */
    FormlyAttributes.prototype.renderer;
    /** @type {?} */
    FormlyAttributes.prototype.elementRef;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWx5LmF0dHJpYnV0ZXMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Abmd4LWZvcm1seS9jb3JlLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvZm9ybWx5LmF0dHJpYnV0ZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQTBDLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7SUFtQjVILDBCQUNVLFVBQ0E7UUFEQSxhQUFRLEdBQVIsUUFBUTtRQUNSLGVBQVUsR0FBVixVQUFVOzBCQWJDLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxVQUFVLENBQUM7MEJBQzdELENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDO0tBYXJGOzs7O0lBWG1CLGtDQUFPOzs7SUFBOUI7UUFDRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7S0FDekI7Ozs7SUFFcUIsaUNBQU07OztJQUE1QjtRQUNFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztLQUMxQjs7Ozs7SUFPRCxzQ0FBVzs7OztJQUFYLFVBQVksT0FBc0I7UUFBbEMsaUJBMEJDO1FBekJDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sV0FBUSxDQUFDO1lBQ2xCLHFCQUFNLGNBQVksR0FBRyxPQUFPLFNBQU0sQ0FBQztZQUNuQyxJQUFJLENBQUMsVUFBVTtpQkFDWixNQUFNLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxLQUFJLENBQUMsY0FBYyxDQUFDLGNBQVksRUFBRSxJQUFJLENBQUMsRUFBdkMsQ0FBdUMsQ0FBQztpQkFDdkQsT0FBTyxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsS0FBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZ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LElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekMsTUFBTSxDQUFDLE9BQU8sWUFBWSxLQUFLLFVBQVUsQ0FBQzthQUMzQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUM7U0FDYjtRQUVELE1BQU0sQ0FBQyxLQUFLLENBQUM7OztnQkE1RWhCLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsb0JBQW9CO2lCQUMvQjs7OztnQkFMNEYsU0FBUztnQkFBcEUsVUFBVTs7O3dCQU96QyxLQUFLLFNBQUMsa0JBQWtCOzBCQUl4QixZQUFZLFNBQUMsT0FBTzt5QkFJcEIsWUFBWSxTQUFDLE1BQU07OzJCQWZ0Qjs7U0FNYSxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEhvc3RMaXN0ZW5lciwgRWxlbWVudFJlZiwgSW5wdXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcywgU2ltcGxlQ2hhbmdlLCBSZW5kZXJlcjIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1seUZpZWxkQ29uZmlnIH0gZnJvbSAnLi9mb3JtbHkuZmllbGQuY29uZmlnJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2Zvcm1seUF0dHJpYnV0ZXNdJyxcbn0pXG5leHBvcnQgY2xhc3MgRm9ybWx5QXR0cmlidXRlcyBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgnZm9ybWx5QXR0cmlidXRlcycpIGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZztcbiAgcHJpdmF0ZSBhdHRyaWJ1dGVzID0gWydpZCcsICduYW1lJywgJ3BsYWNlaG9sZGVyJywgJ3RhYmluZGV4JywgJ3N0ZXAnLCAncmVhZG9ubHknXTtcbiAgcHJpdmF0ZSBzdGF0ZW1lbnRzID0gWydjaGFuZ2UnLCAna2V5ZG93bicsICdrZXl1cCcsICdrZXlwcmVzcycsICdjbGljaycsICdmb2N1cycsICdibHVyJ107XG5cbiAgQEhvc3RMaXN0ZW5lcignZm9jdXMnKSBvbkZvY3VzKCkge1xuICAgIHRoaXMuZmllbGQuZm9jdXMgPSB0cnVlO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignYmx1cicpIG9uQmx1cigpIHtcbiAgICB0aGlzLmZpZWxkLmZvY3VzID0gZmFsc2U7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICApIHt9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmZpZWxkKSB7XG4gICAgICBjb25zdCBmaWVsZENoYW5nZXMgPSBjaGFuZ2VzLmZpZWxkO1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiB0aGlzLmNhbkFwcGx5UmVuZGVyKGZpZWxkQ2hhbmdlcywgYXR0cikpXG4gICAgICAgIC5mb3JFYWNoKGF0dHIgPT4gdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIGF0dHIsIHRoaXMuZ2V0UHJvcFZhbHVlKHRoaXMuZmllbGQsIGF0dHIpLFxuICAgICAgICApKTtcblxuICAgICAgaWYgKHRoaXMuZmllbGQudGVtcGxhdGVPcHRpb25zICYmIHRoaXMuZmllbGQudGVtcGxhdGVPcHRpb25zLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMuZmllbGQudGVtcGxhdGVPcHRpb25zLmF0dHJpYnV0ZXM7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgbmFtZSwgYXR0cmlidXRlc1tuYW1lXSBhcyBzdHJpbmcsXG4gICAgICAgICkpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXRlbWVudHNcbiAgICAgICAgLmZpbHRlcihzdGF0ZW1lbnQgPT4gdGhpcy5jYW5BcHBseVJlbmRlcihmaWVsZENoYW5nZXMsIHN0YXRlbWVudCkpXG4gICAgICAgIC5mb3JFYWNoKHN0YXRlbWVudCA9PiB0aGlzLnJlbmRlcmVyLmxpc3RlbihcbiAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgc3RhdGVtZW50LCB0aGlzLmdldFN0YXRlbWVudFZhbHVlKHN0YXRlbWVudCksXG4gICAgICAgICkpO1xuXG4gICAgICBpZiAoKGZpZWxkQ2hhbmdlcy5wcmV2aW91c1ZhbHVlIHx8IHt9KS5mb2N1cyAhPT0gKGZpZWxkQ2hhbmdlcy5jdXJyZW50VmFsdWUgfHwge30pLmZvY3VzICYmIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmZvY3VzKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50W3RoaXMuZmllbGQuZm9jdXMgPyAnZm9jdXMnIDogJ2JsdXInXSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0UHJvcFZhbHVlKGZpZWxkOiBGb3JtbHlGaWVsZENvbmZpZywgcHJvcDogc3RyaW5nKSB7XG4gICAgZmllbGQgPSBmaWVsZCB8fCB7fTtcbiAgICBpZiAoZmllbGQudGVtcGxhdGVPcHRpb25zICYmIGZpZWxkLnRlbXBsYXRlT3B0aW9uc1twcm9wXSkge1xuICAgICAgcmV0dXJuIGZpZWxkLnRlbXBsYXRlT3B0aW9uc1twcm9wXTtcbiAgICB9XG5cbiAgICByZXR1cm4gKDxhbnk+ZmllbGQpW3Byb3BdIHx8ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdGF0ZW1lbnRWYWx1ZShzdGF0ZW1lbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGZuID0gdGhpcy5maWVsZC50ZW1wbGF0ZU9wdGlvbnNbc3RhdGVtZW50XTtcblxuICAgIHJldHVybiAoZXZlbnQ6IGFueSkgPT4gZm4odGhpcy5maWVsZCwgZXZlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5BcHBseVJlbmRlcihmaWVsZENoYW5nZTogU2ltcGxlQ2hhbmdlLCBwcm9wOiBzdHJpbmcpOiBCb29sZWFuIHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFByb3BWYWx1ZSh0aGlzLmZpZWxkLCBwcm9wKSxcbiAgICAgIHByZXZpb3VzVmFsdWUgPSB0aGlzLmdldFByb3BWYWx1ZShmaWVsZENoYW5nZS5wcmV2aW91c1ZhbHVlLCBwcm9wKTtcblxuICAgIGlmIChwcmV2aW91c1ZhbHVlICE9PSBjdXJyZW50VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlbWVudHMuaW5kZXhPZihwcm9wKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdmdW5jdGlvbic7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIl19